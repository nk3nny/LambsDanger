/*%FSM<COMPILE "scriptedFSM.cfg, Danger">*/
/*%FSM<HEAD>*/
/*
item0[] = {"Player_or__not_l",4,218,1025.000000,-525.000000,1150.000000,-450.000000,12.000000,"Player or " \n "not local"};
item1[] = {"DEFINE_ENUM_BEG",-1,250,-1275.000000,-775.000000,-925.000000,-600.000000,0.000000,"DEFINE_ENUM_BEG(DangerCause)" \n "  DCEnemyDetected, // the first enemy detected" \n "  DCFire, // fire visible" \n "  DCHit, // vehicle hit" \n "  DCEnemyNear, // enemy very close to me" \n "  DCExplosion, // explosion detected" \n "  DCDeadBodyGroup, // dead soldier from my group found" \n "  DCDeadBody, // other dead soldier found" \n "  DCScream // hit soldier screaming" \n "DEFINE_ENUM_END(DangerCause)" \n ""};
item2[] = {"Attack",4,218,25.000000,0.000000,125.000000,50.000000,1.000000,"Attack"};
item3[] = {"End",1,250,1025.000000,775.000000,1100.000000,825.000000,0.000000,"End"};
item4[] = {"Rest",8,218,-542.844849,586.841797,-452.845032,636.841797,0.000000,"Rest"};
item5[] = {"Reacting_on_danger",0,250,-575.000000,-675.000000,-425.000000,-625.000000,0.000000,"Reacting on danger!"};
item6[] = {"Check_queue__and",2,250,850.000000,600.000000,925.000000,650.000000,0.000000,"Check queue " \n "and " \n "clean-up"};
item7[] = {"Next__cause",4,218,850.000000,-375.000000,925.000000,-325.000000,1.000000,"Next  cause"};
item8[] = {"Always",8,218,850.000000,775.000000,925.000000,825.000000,0.000000,"Always"};
item9[] = {"Exit_Variables",4,218,925.000000,-450.000000,1025.000000,-400.000000,12.000000,"Exit Variables"};
item10[] = {"Begin",8,218,-575.000000,-575.000000,-425.000000,-475.000000,0.000000,"Begin"};
item11[] = {"Ready",2,250,-775.000000,-400.000000,-225.000000,-325.000000,0.000000,"Ready"};
item12[] = {"Vehicle",4,218,-800.000000,-275.000000,-525.000000,-125.000000,2.000000,"Vehicle"};
item13[] = {"Infantry",4,218,-450.000000,-275.000000,-200.000000,-125.000000,1.000000,"Infantry"};
item14[] = {"Ready_Vehicle",2,250,-825.000000,-75.000000,-725.000000,-25.000000,0.000000,"Ready Vehicle"};
item15[] = {"Ready_Infantry",2,250,-300.000000,-75.000000,-200.000000,-25.000000,0.000000,"Ready Infantry"};
item16[] = {"Tank_Attack",4,218,-925.000000,25.000000,-825.000000,75.000000,4.000000,"Tank" \n "Attack"};
item17[] = {"Attack____Suppress",2,250,-925.000000,150.000000,-825.000000,200.000000,0.000000,"Attack " \n "+ Suppress" \n ""};
item18[] = {"Timeout",4,218,-925.000000,300.000000,-825.000000,350.000000,0.000000,"Timeout"};
item19[] = {"Reset_vehicle",2,250,-925.000000,500.000000,-825.000000,550.000000,0.000000,"Reset vehicle"};
item20[] = {"",7,210,71.000000,-54.000000,79.000000,-46.000000,0.000000,""};
item21[] = {"Panic",4,218,-450.000000,0.000000,-350.000000,50.000000,8.000000,"Panic"};
item22[] = {"Panic_",2,250,-450.000000,75.000000,-350.000000,125.000000,0.000000,"Panic!"};
item23[] = {"Timeout",4,218,-450.000000,175.000000,-350.000000,225.000000,0.000000,"Timeout"};
item24[] = {"Reset_Panic___Co",2,250,-450.000000,275.000000,-350.000000,325.000000,0.000000,"Reset Panic: " \n "Continue"};
item25[] = {"Attack___Suppress",2,250,-50.000000,225.000000,50.000000,275.000000,0.000000,"Attack" \n "+ Suppress" \n "+ Assault"};
item26[] = {"Timeout",4,218,50.000000,325.000000,150.000000,375.000000,0.000000,"Timeout"};
item27[] = {"Killed",4,218,-100.000000,325.000000,0.000000,375.000000,0.000000,"Killed"};
item28[] = {"Killed___Continu",2,250,-100.000000,425.000000,0.000000,475.000000,0.000000,"Killed: " \n "Continue"};
item29[] = {"Timeout__Continu",2,250,50.000000,425.000000,150.000000,475.000000,0.000000,"Timeout:" \n "Continue"};
item30[] = {"____FUNCTIONS__lambs",-1,250,-1275.000000,-575.000000,-1025.000000,-50.000000,0.000000,"// FUNCTIONS " \n "lambs_danger_fnc_assault" \n "lambs_danger_fnc_assaultBuilding" \n "lambs_danger_fnc_assaultCQB " \n "lambs_danger_fnc_checkBody " \n "lambs_danger_fnc_coward" \n "lambs_danger_fnc_gesture" \n "lambs_danger_fnc_hideInside " \n "lambs_danger_fnc_immediateAction" \n "lambs_danger_fnc_indoor " \n "lambs_danger_fnc_nearbuildings " \n "lambs_danger_fnc_panic " \n "lambs_danger_fnc_shareInformation " \n "lambs_danger_fnc_suppress " \n "lambs_danger_fnc_vehicleAssault " \n "lambs_danger_fnc_vehicleJink " \n "lambs_danger_fnc_vehicleRotate" \n "lambs_danger_fnc_vehicleSuppress " \n "lambs_danger_fnc_eventCallback" \n "" \n "// FUNCTIONS ~ leader" \n "lambs_danger_fnc_leaderArtillery " \n "lambs_danger_fnc_leaderAssess" \n "lambs_danger_fnc_leaderBuildings  " \n "lambs_danger_fnc_leaderCQC" \n "lambs_danger_fnc_leaderHide" \n "lambs_danger_fnc_leaderManoeuvre " \n "lambs_danger_fnc_leaderMode " \n "lambs_danger_fnc_leaderModeUpdate " \n "" \n "// FUNCTIONS ~ debug " \n "lambs_danger_fnc_debugDangerType" \n "lambs_danger_fnc_debugMarkerColor" \n "lambs_danger_fnc_dotMarker" \n "lambs_danger_fnc_zoneMarker"};
item31[] = {"React",4,218,-350.000000,0.000000,-250.000000,50.000000,4.000000,"React"};
item32[] = {"Reaction__to_contact",2,250,-350.000000,75.000000,-250.000000,125.000000,0.000000,"Reaction " \n "to contact" \n ""};
item33[] = {"Investigate",4,218,-225.000000,0.000000,-125.000000,50.000000,2.000000,"Investigate"};
item34[] = {"Investigate",2,250,-225.000000,75.000000,-125.000000,125.000000,0.000000,"Investigate"};
item35[] = {"Timeout",4,218,-225.000000,175.000000,-125.000000,225.000000,0.000000,"Timeout"};
item36[] = {"Reset_Investigate",2,250,-225.000000,275.000000,-125.000000,325.000000,0.000000,"Reset Investigate: " \n "Continue"};
item37[] = {"Leader",4,218,225.000000,-175.000000,325.000000,-100.000000,5.000000,"Leader"};
item38[] = {"Ready_Leader__",2,250,225.000000,-50.000000,325.000000,0.000000,0.000000,"" \n "Ready Leader" \n "" \n ""};
item39[] = {"Leader___Continu",2,250,200.000000,525.000000,300.000000,575.000000,0.000000,"Leader: " \n "Continue"};
item40[] = {"Leader_Assess",4,218,-125.000000,0.000000,-25.000000,50.000000,3.000000,"Leader" \n "Assess"};
item41[] = {"Action_Needed",4,218,425.000000,-50.000000,525.000000,0.000000,2.000000,"Action Needed"};
item42[] = {"Evaluate",2,250,425.000000,50.000000,525.000000,100.000000,0.000000,"Evaluate"};
item43[] = {"Assess___Continu",2,250,-125.000000,75.000000,-25.000000,125.000000,0.000000,"Assess: " \n "Continue"};
item44[] = {"___Contact",4,218,325.000000,200.000000,425.000000,250.000000,0.000000,"1" \n "Contact"};
item45[] = {"Contact___Contin",2,250,325.000000,275.000000,425.000000,325.000000,0.000000,"Contact: " \n "Continue"};
item46[] = {"___Hide_",4,218,425.000000,200.000000,525.000000,250.000000,1.000000,"2" \n "Hide!"};
item47[] = {"Hide_from_target",2,250,425.000000,300.000000,525.000000,350.000000,0.000000,"Hide from target!" \n "Continue"};
item48[] = {"Timeout",4,218,325.000000,425.000000,425.000000,475.000000,0.000000,"Timeout"};
item49[] = {"___Artillery",4,218,675.000000,200.000000,775.000000,250.000000,1.000000,"6" \n "Artillery"};
item50[] = {"Artillery___Cont",2,250,675.000000,425.000000,775.000000,475.000000,0.000000,"Artillery: " \n "Continue"};
item51[] = {"___Manoeuvre",4,218,525.000000,200.000000,625.000000,250.000000,1.000000,"3" \n "Manoeuvre"};
item52[] = {"Manoeuvre___Cont",2,250,525.000000,325.000000,625.000000,375.000000,0.000000,"Manoeuvre: " \n "Continue"};
item53[] = {"CQC",4,218,150.000000,150.000000,250.000000,200.000000,4.000000,"CQC"};
item54[] = {"Panic",4,218,-350.000000,175.000000,-250.000000,225.000000,0.000000,"Panic"};
item55[] = {"Cargo_or__driver",4,218,-725.000000,25.000000,-625.000000,75.000000,0.000000,"Cargo or " \n "driver"};
item56[] = {"Ready_1",2,250,-725.000000,150.000000,-625.000000,200.000000,0.000000,"Ready"};
item57[] = {"Investigate",4,218,-825.000000,25.000000,-725.000000,75.000000,3.000000,"Investigate"};
item58[] = {"Investigate__Unload",2,250,-825.000000,150.000000,-725.000000,200.000000,0.000000,"Investigate" \n "+Unload cargo"};
item59[] = {"Reached__destina",4,218,-825.000000,300.000000,-725.000000,350.000000,0.000000,"Reached " \n "destination"};
item60[] = {"Unload",2,250,-825.000000,400.000000,-725.000000,450.000000,0.000000,"Unload"};
item61[] = {"Got_hit__Danger",4,218,-1050.000000,300.000000,-950.000000,350.000000,2.000000,"Got hit!" \n "Danger close!"};
item62[] = {"Jink_",2,250,-1050.000000,400.000000,-950.000000,450.000000,0.000000,"Jink!"};
item63[] = {"Timeout__Destina",4,218,-1050.000000,500.000000,-950.000000,550.000000,0.000000,"Timeout " \n "Destination"};
item64[] = {"Pre_attack",2,250,25.000000,75.000000,125.000000,125.000000,0.000000,"Pre-attack"};
item65[] = {"Always",4,218,-50.000000,150.000000,50.000000,200.000000,0.000000,"Always"};
item66[] = {"Coward",4,218,50.000000,150.000000,150.000000,200.000000,1.000000,"Coward"};
item67[] = {"Coward",2,250,50.000000,225.000000,150.000000,275.000000,0.000000,"Coward"};
item68[] = {"Clear_buildings",2,4346,150.000000,225.000000,250.000000,275.000000,0.000000,"Clear buildings"};
item69[] = {"Cycle_",4,218,225.000000,325.000000,325.000000,375.000000,1.000000,"Cycle!"};
item70[] = {"",7,210,-466.500000,-54.000000,-458.500000,-46.000000,0.000000,""};
item71[] = {"Static",4,218,-1025.000000,25.000000,-925.000000,75.000000,1.000000,"Static"};
item72[] = {"Suppression",2,250,-1025.000000,150.000000,-925.000000,200.000000,0.000000,"Suppression"};
item73[] = {"LEADER_EVALUATIONS",-1,250,575.000000,25.000000,800.000000,75.000000,0.000000,"LEADER EVALUATIONS AND ACTIONS"};
item74[] = {"Close_Quarters_C",-1,250,175.000000,75.000000,300.000000,125.000000,0.000000,"Close" \n "Quarters" \n "Combat"};
item75[] = {"OUTDATED_______VARIABLES",-1,250,-1625.000000,-575.000000,-1300.000000,-250.000000,0.000000,"OUTDATED!" \n "" \n "" \n "// VARIABLES " \n "lambs_danger_inCQB" \n "lambs_danger_lastAction" \n "lambs_danger_isChecked" \n "lambs_danger_dangerMode" \n "lambs_danger_dangerFormation" \n "lambs_danger_dangerCode" \n "lambs_danger_dangerAI" \n "" \n "// VARIABLES ~ debug" \n "lambs_danger_currentTarget" \n "lambs_danger_currentTask" \n "lambs_danger_lambs_danger_FSMDangerCauseData"};
item76[] = {"LAMBS_DANGER_FSM",-1,250,-1700.000000,-925.000000,-800.000000,-800.000000,0.000000,"LAMBS DANGER FSM 2.0.0"};
item77[] = {"Player_formation",4,218,175.000000,350.000000,275.000000,400.000000,0.000000,"Player" \n "formationleader"};
item78[] = {"EXIT_VARIABLES_Unconcious",-1,250,1125.000000,-425.000000,1350.000000,-350.000000,0.000000,"EXIT VARIABLES" \n "Unconcious" \n "Fleeing" \n "Danger_disabled"};
item79[] = {"Artillery",4,218,-1125.000000,25.000000,-1025.000000,75.000000,5.000000,"Artillery"};
item80[] = {"Artillery__none",2,250,-1125.000000,150.000000,-1025.000000,200.000000,0.000000,"Artillery:" \n "none"};
version=1;
class LayoutItems
{
	class Item1
	{
		class ItemInfo
		{
			FontFace="Arial";
			FontHeight=10;
			lStyle=1;
			Align=0;
		};
	};
	class Item30
	{
		class ItemInfo
		{
			FontFace="Arial";
			FontHeight=10;
			lStyle=1;
			Align=0;
		};
	};
	class Item73
	{
		class ItemInfo
		{
			FontFace="Arial";
			FontHeight=10;
			lStyle=1;
		};
	};
	class Item74
	{
		class ItemInfo
		{
			FontFace="Arial";
			FontHeight=10;
			lStyle=1;
		};
	};
	class Item75
	{
		class ItemInfo
		{
			FontFace="Arial";
			FontHeight=10;
			lStyle=1;
			Align=0;
		};
	};
	class Item76
	{
		class ItemInfo
		{
			FontFace="Arial";
			FontHeight=20;
			lStyle=1;
		};
	};
	class Item78
	{
		class ItemInfo
		{
			FontFace="Arial";
			FontHeight=10;
			lStyle=1;
		};
	};
};
link0[] = {0,3};
link1[] = {2,64};
link2[] = {4,6};
link3[] = {5,0};
link4[] = {5,10};
link5[] = {6,7};
link6[] = {6,8};
link7[] = {7,11};
link8[] = {8,3};
link9[] = {9,3};
link10[] = {10,11};
link11[] = {11,4};
link12[] = {11,9};
link13[] = {11,12};
link14[] = {11,13};
link15[] = {12,14};
link16[] = {13,15};
link17[] = {14,16};
link18[] = {14,55};
link19[] = {14,57};
link20[] = {14,71};
link21[] = {14,79};
link22[] = {15,20};
link23[] = {15,21};
link24[] = {15,31};
link25[] = {15,33};
link26[] = {15,37};
link27[] = {15,40};
link28[] = {15,70};
link29[] = {16,17};
link30[] = {17,18};
link31[] = {17,61};
link32[] = {18,19};
link33[] = {19,4};
link34[] = {20,2};
link35[] = {21,22};
link36[] = {22,23};
link37[] = {23,24};
link38[] = {24,4};
link39[] = {25,26};
link40[] = {25,27};
link41[] = {26,29};
link42[] = {27,28};
link43[] = {28,4};
link44[] = {29,4};
link45[] = {31,32};
link46[] = {32,23};
link47[] = {32,54};
link48[] = {33,34};
link49[] = {34,35};
link50[] = {34,54};
link51[] = {35,36};
link52[] = {36,4};
link53[] = {37,38};
link54[] = {38,41};
link55[] = {39,4};
link56[] = {40,43};
link57[] = {41,42};
link58[] = {42,44};
link59[] = {42,46};
link60[] = {42,49};
link61[] = {42,51};
link62[] = {43,35};
link63[] = {44,45};
link64[] = {45,48};
link65[] = {46,47};
link66[] = {47,48};
link67[] = {48,39};
link68[] = {49,50};
link69[] = {50,48};
link70[] = {51,52};
link71[] = {52,48};
link72[] = {53,68};
link73[] = {54,22};
link74[] = {55,56};
link75[] = {56,4};
link76[] = {57,58};
link77[] = {58,18};
link78[] = {58,59};
link79[] = {59,60};
link80[] = {60,4};
link81[] = {61,62};
link82[] = {62,63};
link83[] = {63,19};
link84[] = {64,53};
link85[] = {64,65};
link86[] = {64,66};
link87[] = {65,25};
link88[] = {66,67};
link89[] = {67,26};
link90[] = {68,26};
link91[] = {68,69};
link92[] = {68,77};
link93[] = {69,68};
link94[] = {70,4};
link95[] = {71,72};
link96[] = {72,18};
link97[] = {77,29};
link98[] = {79,80};
link99[] = {80,18};
link100[] = {80,61};
globals[] = {0.000000,0,0,0,0,640,480,2,402,6316128,1,-1.149261,401.582123,441.502075,114.282867,1088,884,1};
window[] = {2,-1,-1,-32000,-32000,943,130,932,130,3,1106};
*//*%FSM</HEAD>*/
class FSM
{
        fsmName = "Danger";
        class States
        {
                /*%FSM<STATE "End">*/
                class End
                {
                        name = "End";
                        itemno = 3;
                        init = /*%FSM<STATEINIT""">*/"// debug" \n
                         "//systemchat format [""%1 - DANGER.FSM ENDS FOR %2"",side _this, name _this]; " \n
                         "" \n
                         "// fleeing" \n
                         "if (fleeing _this) then {" \n
                         "	[_this] call lambs_danger_fnc_fleeing;" \n
                         "}; "/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Reacting_on_danger">*/
                class Reacting_on_danger
                {
                        name = "Reacting_on_danger";
                        itemno = 5;
                        init = /*%FSM<STATEINIT""">*/"// DEBUG" \n
                         "//if (lambs_danger_debug_FSM) then {systemchat format [""Danger.fsm - Init - %1 at %2s"",side _this,round time];};" \n
                         "" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Player_or__not_l">*/
                                class Player_or__not_l
                                {
                                        itemno = 0;
                                        priority = 12.000000;
                                        to="End";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!local _this || {isPlayer _this} || {behaviour _this isEqualTo ""CARELESS""}"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Begin">*/
                                class Begin
                                {
                                        itemno = 10;
                                        priority = 0.000000;
                                        to="Ready";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Check_queue__and">*/
                class Check_queue__and
                {
                        name = "Check_queue__and";
                        itemno = 6;
                        init = /*%FSM<STATEINIT""">*/"//systemchat format [""%1 Danger.fsm RESET (%2)"",side _this,_dangerCause call lambs_danger_fnc_debugDangerType];" \n
                         "	" \n
                         "// reset " \n
                         "_this lookAt objNull;" \n
                         "_this forceSpeed -1;"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Next__cause">*/
                                class Next__cause
                                {
                                        itemno = 7;
                                        priority = 1.000000;
                                        to="Ready";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"count _queue > 0"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Always">*/
                                class Always
                                {
                                        itemno = 8;
                                        priority = 0.000000;
                                        to="End";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Ready">*/
                class Ready
                {
                        name = "Ready";
                        itemno = 11;
                        init = /*%FSM<STATEINIT""">*/"/*" \n
                         "comment ""0  DCEnemyDetected"";" \n
                         "comment ""1  DCFire"";" \n
                         "comment ""2  DCHit"";" \n
                         "comment ""3  DCEnemyNear"";" \n
                         "comment ""4  DCExplosion"";" \n
                         "comment ""5  DCDeadBodyGroup"";" \n
                         "comment ""6  DCDeadBody"";" \n
                         "comment ""7  DCScream"";" \n
                         "comment ""8  DCCanFire"";" \n
                         "comment ""9  DCBulletClose"";" \n
                         "*/" \n
                         "" \n
                         "// DEBUG BEGIN! " \n
                         "private [""_dangerCause""];" \n
                         "" \n
                         "// Retrieve the highest priority event from the _queue" \n
                         "// private _priors = [3,4,5,1,4,1,1,2,2,1];" \n
                         "private _priors = [3,1,5,4,3,1,1,2,2,1];" \n
                         "" \n
                         "/*" \n
                         "	Changes " \n
                         "		EnemyNear increased -- sets greater focus on reactions " \n
                         "		Fire decreased from 4 to 1 -- no special interaction " \n
                         "*/" \n
                         "" \n
                         "// pre-check " \n
                         "private _explosive = false; " \n
                         "" \n
                         "private _priorCur = [-1, _priors select _dangerCause] select (_dangerCause > 0);" \n
                         "{" \n
                         "	private _cause = _x select 0;" \n
                         "	if ((_priors select _cause) > _priorCur) then {" \n
                         "		_dangerCause = _cause;" \n
                         "		_dangerPos = _x select 1;" \n
                         "		_dangerUntil = _x select 2;" \n
                         "		_dangerCausedBy = _x select 3;" \n
                         "		_explosive = (_x select 0) isEqualTo 4 && {_this distance _dangerPos < 8};" \n
                         "	};" \n
                         "	true " \n
                         "} count _queue;" \n
                         "" \n
                         "_this setVariable [""lambs_danger_FSMDangerCauseData"", [_dangerCause, _dangerPos, _dangerUntil, _dangerCausedBy]];" \n
                         "" \n
                         "// settings" \n
                         "private _onFoot = isNull ObjectParent _this;" \n
                         "private _dangerMode = group _this getVariable [""lambs_danger_dangerMode"",[[],[],true,time]]; " \n
                         "" \n
                         "// other settings " \n
                         "private _CQCmode = (formation group _this) in lambs_danger_CQB_formations;" \n
                         "" \n
                         "// reset dangerMode" \n
                         "if ( (_dangerMode select 3) < (time + 5)) then {_dangerMode set [2,true];};" \n
                         "" \n
                         "// end " \n
                         "_queue = [];" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Exit_Variables">*/
                                class Exit_Variables
                                {
                                        itemno = 9;
                                        priority = 12.000000;
                                        to="End";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_this call lambs_danger_fnc_fsmExitVariables"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Vehicle">*/
                                class Vehicle
                                {
                                        itemno = 12;
                                        priority = 2.000000;
                                        to="Ready_Vehicle";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!_onFoot"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Infantry">*/
                                class Infantry
                                {
                                        itemno = 13;
                                        priority = 1.000000;
                                        to="Ready_Infantry";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_onFoot"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Rest">*/
                                class Rest
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Check_queue__and";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Ready_Vehicle">*/
                class Ready_Vehicle
                {
                        name = "Ready_Vehicle";
                        itemno = 14;
                        init = /*%FSM<STATEINIT""">*/"// debug" \n
                         "if (lambs_danger_debug_FSM) then {systemchat format [""%1 - Vehicle Danger! - %2"",side _this,_dangerCause call lambs_danger_fnc_debugDangerType]};" \n
                         "" \n
                         "// settings " \n
                         "_tank = (vehicle _this) isKindOf ""Tank"" || {(vehicle _this) isKindOf ""Wheeled_APC_F""}; " \n
                         "_static = (vehicle _this) isKindOf ""StaticWeapon""; " \n
                         "_artillery = getNumber (configFile >> ""CfgVehicles"" >> (typeOf (vehicle _this)) >> ""artilleryScanner"") > 0;" \n
                         "" \n
                         "// commander" \n
                         "_commander = (effectiveCommander (vehicle _this)) isEqualTo _this; " \n
                         "" \n
                         "// attack is appropriate " \n
                         "_attack = _dangerCause in [0,2,8,9]; " \n
                         "" \n
                         "// investigate bodies? " \n
                         "_investigate = _dangerCause in [5,6];" \n
                         "" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Artillery">*/
                                class Artillery
                                {
                                        itemno = 79;
                                        priority = 5.000000;
                                        to="Artillery__none";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_artillery"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Tank_Attack">*/
                                class Tank_Attack
                                {
                                        itemno = 16;
                                        priority = 4.000000;
                                        to="Attack____Suppress";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_tank && {_attack} && {_commander}"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Investigate">*/
                                class Investigate
                                {
                                        itemno = 57;
                                        priority = 3.000000;
                                        to="Investigate__Unload";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_investigate && {_commander} && {!_tank}"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Static">*/
                                class Static
                                {
                                        itemno = 71;
                                        priority = 1.000000;
                                        to="Suppression";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_static"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Cargo_or__driver">*/
                                class Cargo_or__driver
                                {
                                        itemno = 55;
                                        priority = 0.000000;
                                        to="Ready_1";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Ready_Infantry">*/
                class Ready_Infantry
                {
                        name = "Ready_Infantry";
                        itemno = 15;
                        init = /*%FSM<STATEINIT""">*/"// debug" \n
                         "if (lambs_danger_debug_FSM) then {systemchat format [""%1 - Danger! - %2"",side _this,_dangerCause call lambs_danger_fnc_debugDangerType]};" \n
                         "" \n
                         "// immediate action" \n
                         "if ((_dangerCause isEqualTo 2)  && {random 1 > 0.2}) then {" \n
                         "	[_this,stance _this] call lambs_danger_fnc_immediateAction;" \n
                         "}; " \n
                         "" \n
                         "// Panic when suppression level is high " \n
                         "private _panic = ((getSuppression _this) >.80) && {1 > random lambs_danger_panic_chance};" \n
                         "" \n
                         "// React to fire when source of danger is distant or unkown" \n
                         "private _react = (_dangerMode select 2) && {!_CQCmode};" \n
                         "" \n
                         "// Investigate dead bodies when enemies are out of sight " \n
                         "private _investigate = _dangerCause in [5,6] && {_this distance2d _dangerPos < (20 + random  10)};" \n
                         "" \n
                         "// identify leader" \n
                         "private _leader = leader group _this isEqualTo _this && {count units group _this > 1} && {getSuppression _this < 0.5};" \n
                         "private _assess = _leader && {(_dangerMode select 3) < (time + 300)}; " \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Panic">*/
                                class Panic
                                {
                                        itemno = 21;
                                        priority = 8.000000;
                                        to="Panic_";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_panic"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Leader">*/
                                class Leader
                                {
                                        itemno = 37;
                                        priority = 5.000000;
                                        to="Ready_Leader__";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_leader &&  {count (_dangerMode select 0) > 0}"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "React">*/
                                class React
                                {
                                        itemno = 31;
                                        priority = 4.000000;
                                        to="Reaction__to_contact";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_react"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Leader_Assess">*/
                                class Leader_Assess
                                {
                                        itemno = 40;
                                        priority = 3.000000;
                                        to="Assess___Continu";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_assess"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Investigate">*/
                                class Investigate
                                {
                                        itemno = 33;
                                        priority = 2.000000;
                                        to="Investigate";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_investigate"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Attack">*/
                                class Attack
                                {
                                        itemno = 2;
                                        priority = 1.000000;
                                        to="Pre_attack";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!isNull _dangerCausedBy && {alive _dangerCausedBy}"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Rest">*/
                                class Rest
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Check_queue__and";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Attack____Suppress">*/
                class Attack____Suppress
                {
                        name = "Attack____Suppress";
                        itemno = 17;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// health " \n
                         "_health = damage _this; " \n
                         "" \n
                         "// timeout " \n
                         "_timeout = 7 + random 4; " \n
                         "" \n
                         "// tank assault " \n
                         "if (speed (vehicle _this) < 10) then {" \n
                         "" \n
                         "	// rotate +  suppression (internal to vehicle rotate) " \n
                         "	[vehicle _this,_dangerCausedBy] call lambs_danger_fnc_vehicleRotate; " \n
                         "	" \n
                         "	// assault " \n
                         "	private _buildings = [_dangerPos,28,false,false] call lambs_danger_fnc_findBuildings;" \n
                         "	if (count _buildings > 0) then {" \n
                         "		[" \n
                         "			{" \n
                         "				_this call lambs_danger_fnc_vehicleAssault;" \n
                         "			}, [_this,_dangerPos,_dangerCausedBy,_buildings], ( 3 + random 3 )" \n
                         "		] call CBA_fnc_waitAndExecute;" \n
                         "	};" \n
                         "}; "/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Got_hit__Danger">*/
                                class Got_hit__Danger
                                {
                                        itemno = 61;
                                        priority = 2.000000;
                                        to="Jink_";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"(_health < damage (vehicle _this)) || {_dangerCausedBy distance (vehicle _this) < 20}"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 18;
                                        priority = 0.000000;
                                        to="Reset_vehicle";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Reset_vehicle">*/
                class Reset_vehicle
                {
                        name = "Reset_vehicle";
                        itemno = 19;
                        init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Rest">*/
                                class Rest
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Check_queue__and";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Panic_">*/
                class Panic_
                {
                        name = "Panic_";
                        itemno = 22;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// suppression code " \n
                         "_delay = [_this,_dangerCausedBy] call lambs_danger_fnc_panic; " \n
                         "" \n
                         "// time out " \n
                         "_timeout = time + _delay; " \n
                         "" \n
                         "// debug " \n
                         "if (lambs_danger_debug_FSM) then {" \n
                         "" \n
                         "	/// msg " \n
                         "	systemchat format [""%1 - PANIC! - %2 for %3s"",side _this,name _this,round (_timeout - time)];" \n
                         "" \n
                         "	// markers " \n
                         "	[_this,format [""PANIC -- %1"",name _this],""ColorKhaki"",""hd_Destroy""] call lambs_danger_fnc_dotMarker; " \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 23;
                                        priority = 0.000000;
                                        to="Reset_Panic___Co";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Reset_Panic___Co">*/
                class Reset_Panic___Co
                {
                        name = "Reset_Panic___Co";
                        itemno = 24;
                        init = /*%FSM<STATEINIT""">*/"// reset panic here " \n
                         "" \n
                         "// stance" \n
                         "_this setUnitPos ""AUTO"";"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Rest">*/
                                class Rest
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Check_queue__and";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Attack___Suppress">*/
                class Attack___Suppress
                {
                        name = "Attack___Suppress";
                        itemno = 25;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// Can fire -- delay for a bit  " \n
                         "if ((_dangerCause in [8,9]) && {random 1 > 0.3}) then {" \n
                         "" \n
                         "	// movement" \n
                         "	_this forceSpeed 0;" \n
                         "	_this setUnitPosWeak selectRandom [""DOWN"",""MIDDLE""];" \n
                         "" \n
                         "	// suppress " \n
                         "	if (_this distance _dangerCausedBy > lambs_danger_minSuppression_range) then {" \n
                         "		[_this,_dangerPos] call lambs_danger_fnc_suppress;" \n
                         "	}; " \n
                         "};" \n
                         "" \n
                         "// Close quarters" \n
                         "if (_assault && {_this knowsAbout _dangerCausedBy > 2}) then {" \n
                         "" \n
                         "	// movement" \n
                         "	_this forceSpeed selectRandom [2,2,3];" \n
                         "" \n
                         "	// Check buildings near enemy" \n
                         "	[_this,_dangerCausedBy,20] call lambs_danger_fnc_assault;" \n
                         "" \n
                         "	// small delay!" \n
                         "	_timeout = time + 1 + random 4; " \n
                         "" \n
                         "}; " \n
                         "" \n
                         "// debug " \n
                         "//if (lambs_danger_debug_FSM) then {systemchat format [""%1 - ATTACK! - %2 for %3s"",side _this,name _dangerCausedBy,round (_timeout - time)]};" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Killed">*/
                                class Killed
                                {
                                        itemno = 27;
                                        priority = 0.000000;
                                        to="Killed___Continu";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!alive _dangerCausedBy"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 26;
                                        priority = 0.000000;
                                        to="Timeout__Continu";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Killed___Continu">*/
                class Killed___Continu
                {
                        name = "Killed___Continu";
                        itemno = 28;
                        init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Rest">*/
                                class Rest
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Check_queue__and";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Timeout__Continu">*/
                class Timeout__Continu
                {
                        name = "Timeout__Continu";
                        itemno = 29;
                        init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Rest">*/
                                class Rest
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Check_queue__and";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Reaction__to_contact">*/
                class Reaction__to_contact
                {
                        name = "Reaction__to_contact";
                        itemno = 32;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// time out " \n
                         "_timeout = time + 10 + random 6; " \n
                         "" \n
                         "// look at explosions" \n
                         "if (_dangerCause isEqualTo 4) then {" \n
                         "	_this lookAt _dangerPos; " \n
                         "}; " \n
                         "" \n
                         "// react " \n
                         "[_this,_dangerPos,_leader] call lambs_danger_fnc_react;" \n
                         "" \n
                         "// debug " \n
                         "if (lambs_danger_debug_FSM) then {" \n
                         "" \n
                         "	// msg" \n
                         "	systemchat format [""%1 - REACT! - %2 for %3s"",side _this,name _this,round (_timeout - time)];" \n
                         "" \n
                         "	// marker" \n
                         "	_m = [_dangerPos,format [""REACT -- %1"",_dangerCause call lambs_danger_fnc_debugDangerType],""colorOrange"",""hd_warning""] call lambs_danger_fnc_dotMarker;" \n
                         "	if (!_leader) then {_m setMarkerSizeLocal [0.5,0.5]}; " \n
                         "" \n
                         "};" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Panic">*/
                                class Panic
                                {
                                        itemno = 54;
                                        priority = 0.000000;
                                        to="Panic_";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"(getSuppression _this) >.95"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 23;
                                        priority = 0.000000;
                                        to="Reset_Panic___Co";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Investigate">*/
                class Investigate
                {
                        name = "Investigate";
                        itemno = 34;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// time out " \n
                         "_timeout = time + 5 + random 4; " \n
                         "" \n
                         "// look at it " \n
                         "_this lookAt _dangerPos; " \n
                         "" \n
                         "// leaders gesture " \n
                         "[formationLeader _this,[""gesturePoint""]] call lambs_danger_fnc_gesture; " \n
                         "" \n
                         "// check body" \n
                         "[_this,_dangerPos] call lambs_danger_fnc_checkBody; " \n
                         "" \n
                         "// debug " \n
                         "if (lambs_danger_debug_FSM) then {" \n
                         "" \n
                         "	// msg " \n
                         "	systemchat format [""%1 - INVESTIGATING! - %2 for %3s"",side _this,name _this,round (_timeout - time)];" \n
                         "" \n
                         "	// marker" \n
                         "	[_dangerPos,format [""INVESTIGATE -- %1"",_dangerCause call lambs_danger_fnc_debugDangerType],""colorOrange"",""hd_dot""] call lambs_danger_fnc_dotMarker; " \n
                         " " \n
                         "	// arrows " \n
                         "	_help = createVehicle [""Sign_Arrow_Large_Yellow_F"",[0,0,0],[],0,""CAN_COLLIDE""];" \n
                         "	_help setPos _dangerPos; " \n
                         "" \n
                         "}; " \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Panic">*/
                                class Panic
                                {
                                        itemno = 54;
                                        priority = 0.000000;
                                        to="Panic_";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"(getSuppression _this) >.95"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 35;
                                        priority = 0.000000;
                                        to="Reset_Investigate";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Reset_Investigate">*/
                class Reset_Investigate
                {
                        name = "Reset_Investigate";
                        itemno = 36;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// stance " \n
                         "//_this setUnitPos ""AUTO"";" \n
                         "" \n
                         "// join" \n
                         "_this doFollow (leader group _this); " \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Rest">*/
                                class Rest
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Check_queue__and";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Ready_Leader__">*/
                class Ready_Leader__
                {
                        name = "Ready_Leader__";
                        itemno = 38;
                        init = /*%FSM<STATEINIT""">*/"// ready leader " \n
                         "" \n
                         "// variables " \n
                         "private [""_target""]; " \n
                         "private _units = units group _this; " \n
                         "private _evaluation = _dangerMode select 0;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Action_Needed">*/
                                class Action_Needed
                                {
                                        itemno = 41;
                                        priority = 2.000000;
                                        to="Evaluate";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Leader___Continu">*/
                class Leader___Continu
                {
                        name = "Leader___Continu";
                        itemno = 39;
                        init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Rest">*/
                                class Rest
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Check_queue__and";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Evaluate">*/
                class Evaluate
                {
                        name = "Evaluate";
                        itemno = 42;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// sort from greatest to lowest -- select greatest  (Lower number measures as higher threat!) " \n
                         "_evaluation sort true; " \n
                         "_evaluation = _evaluation select 0; "/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "___Hide_">*/
                                class ___Hide_
                                {
                                        itemno = 46;
                                        priority = 1.000000;
                                        to="Hide_from_target";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_evaluation isEqualTo 2"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "___Artillery">*/
                                class ___Artillery
                                {
                                        itemno = 49;
                                        priority = 1.000000;
                                        to="Artillery___Cont";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_evaluation isEqualTo 6"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "___Manoeuvre">*/
                                class ___Manoeuvre
                                {
                                        itemno = 51;
                                        priority = 1.000000;
                                        to="Manoeuvre___Cont";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_evaluation isEqualTo 3"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "___Contact">*/
                                class ___Contact
                                {
                                        itemno = 44;
                                        priority = 0.000000;
                                        to="Contact___Contin";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Assess___Continu">*/
                class Assess___Continu
                {
                        name = "Assess___Continu";
                        itemno = 43;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// time out " \n
                         "_timeout = time  + 2 + random 4; " \n
                         "" \n
                         "// leader assessment " \n
                         "[_this,_dangerPos] call lambs_danger_fnc_leaderAssess; " \n
                         "" \n
                         "// debug " \n
                         "if (lambs_danger_debug_FSM) then {" \n
                         "" \n
                         "	// msg " \n
                         "	systemchat format [""%1 - LEADER ASSESS! - %2 for %3s"",side _this,name _this,round (_timeout - time)];" \n
                         "" \n
                         "	// marker" \n
                         "	[_this,format [""LEADER ASSESS -- %1"",_dangerCause call lambs_danger_fnc_debugDangerType],""colorOrange"",""hd_unknown""] call lambs_danger_fnc_dotMarker; " \n
                         " " \n
                         "}; " \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 35;
                                        priority = 0.000000;
                                        to="Reset_Investigate";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Contact___Contin">*/
                class Contact___Contin
                {
                        name = "Contact___Contin";
                        itemno = 45;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// time out " \n
                         "_timeout = -1; " \n
                         "" \n
                         "// clean array " \n
                         "[_this,_evaluation] call lambs_danger_fnc_leaderModeUpdate;" \n
                         "" \n
                         "// gesture" \n
                         "[_this,[""gestureFreeze""]] call lambs_danger_fnc_gesture;" \n
                         "" \n
                         "// find target " \n
                         "//_target = (_dangerMode select 1) select 1; <-- disabled. Produced bugged results " \n
                         "_target = _this findNearestEnemy _dangerPos;" \n
                         "" \n
                         "// execute group hide " \n
                         "[_this,_target] call lambs_danger_fnc_leaderContact;" \n
                         "" \n
                         "// debug " \n
                         "if (lambs_danger_debug_FSM) then {" \n
                         "" \n
                         "	// message " \n
                         "	systemchat format [""%1 - LEADER ACTION! - Contact"",side _this];" \n
                         "" \n
                         "	// marker " \n
                         "	[_this,format [""%1 - LEADER ACTION -- Contact!"",side _this],_this call lambs_danger_fnc_debugMarkerColor,""hd_warning""] call lambs_danger_fnc_dotMarker; " \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 48;
                                        priority = 0.000000;
                                        to="Leader___Continu";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Hide_from_target">*/
                class Hide_from_target
                {
                        name = "Hide_from_target";
                        itemno = 47;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// time out " \n
                         "_timeout = time + 20 + random 10; " \n
                         "" \n
                         "// clean array " \n
                         "[_this,_evaluation,120] call lambs_danger_fnc_leaderModeUpdate;" \n
                         "" \n
                         "// find target " \n
                         "_target = (_dangerMode select 1) select 2;" \n
                         "" \n
                         "// execute group hide " \n
                         "[_this,_target] call lambs_danger_fnc_leaderHide;" \n
                         "" \n
                         "// debug " \n
                         "if (lambs_danger_debug_FSM) then {" \n
                         "" \n
                         "	// message " \n
                         "	systemchat format [""%1 - LEADER ACTION! - Hide"",side _this];" \n
                         "" \n
                         "	// marker " \n
                         "	[_this,format [""%1 - LEADER ACTION -- Hide!"",side _this],_this call lambs_danger_fnc_debugMarkerColor,""hd_join""] call lambs_danger_fnc_dotMarker; " \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 48;
                                        priority = 0.000000;
                                        to="Leader___Continu";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Artillery___Cont">*/
                class Artillery___Cont
                {
                        name = "Artillery___Cont";
                        itemno = 50;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// time out " \n
                         "_timeout = time + 20 + random 10; " \n
                         "" \n
                         "// find target " \n
                         "_target = (_dangerMode select 1) select 6;" \n
                         "" \n
                         "// call artillery if available " \n
                         "if (_this distance _target  > 100 && {count (missionNameSpace getVariable [""lambs_artillery_"" + str (side _this),[]]) > 0}) then {" \n
                         "" \n
                         "	// do artillery " \n
                         "	[_this,_target] call lambs_danger_fnc_leaderArtillery; " \n
                         "" \n
                         "	// clean array " \n
                         "	[_this,_evaluation] call lambs_danger_fnc_leaderModeUpdate;" \n
                         "" \n
                         "}; " \n
                         "" \n
                         "// debug " \n
                         "if (lambs_danger_debug_FSM) then {" \n
                         "" \n
                         "	// message " \n
                         "	systemchat format [""%1 - LEADER ACTION! - Call artillery"",side _this];" \n
                         "" \n
                         "	// marker " \n
                         "	[_this,format [""%1 - LEADER ACTION -- Call artillery!"",side _this],_this call lambs_danger_fnc_debugMarkerColor,""hd_warning""] call lambs_danger_fnc_dotMarker; " \n
                         "	[_target,""Artillery target"",_this call lambs_danger_fnc_debugMarkerColor,""hd_destroy""] call lambs_danger_fnc_dotMarker;" \n
                         "};" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 48;
                                        priority = 0.000000;
                                        to="Leader___Continu";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Manoeuvre___Cont">*/
                class Manoeuvre___Cont
                {
                        name = "Manoeuvre___Cont";
                        itemno = 52;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// time out " \n
                         "_timeout = time + 15 + random 10; " \n
                         "" \n
                         "// clean array " \n
                         "[_this,_evaluation,70] call lambs_danger_fnc_leaderModeUpdate;" \n
                         "" \n
                         "// find pos " \n
                         "_target = (_dangerMode select 1) select 3;" \n
                         "" \n
                         "// execute group Manoeuvre" \n
                         "[_this,_target] call lambs_danger_fnc_leaderManoeuvre;" \n
                         "" \n
                         "// debug " \n
                         "if (lambs_danger_debug_FSM) then {" \n
                         "" \n
                         "	// message " \n
                         "	systemchat format [""%1 - LEADER ACTION! - Manoeuvre"",side _this];" \n
                         "" \n
                         "	// marker " \n
                         "	_m = [_this,format [""%1 - LEADER ACTION -- Manoeuvre!"",side _this],_this call lambs_danger_fnc_debugMarkerColor,""hd_arrow""] call lambs_danger_fnc_dotMarker; " \n
                         "	_m setMarkerDirlocal (_this getDir _target); " \n
                         "	[_target,"""",_this call lambs_danger_fnc_debugMarkerColor,""hd_objective""] call lambs_danger_fnc_dotMarker; " \n
                         "" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 48;
                                        priority = 0.000000;
                                        to="Leader___Continu";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Ready_1">*/
                class Ready_1
                {
                        name = "Ready_1";
                        itemno = 56;
                        init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Rest">*/
                                class Rest
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Check_queue__and";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Investigate__Unload">*/
                class Investigate__Unload
                {
                        name = "Investigate__Unload";
                        itemno = 58;
                        init = /*%FSM<STATEINIT""">*/"//systemchat ""VEHICLE INVESTIGATE"";" \n
                         "" \n
                         "// timeout " \n
                         "_timeout =4 + random 3; " \n
                         "" \n
                         "// destination -- should be a function " \n
                         "_destination = selectRandom (selectBestPlaces [_dangerPos, 50,""(1 + forest + trees) * (1 + houses) * (1 - sea)"",100,3] apply {_x select 0}); " \n
                         "" \n
                         "// move " \n
                         "(vehicle _this) doMove _destination; " \n
                         "" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Reached__destina">*/
                                class Reached__destina
                                {
                                        itemno = 59;
                                        priority = 0.000000;
                                        to="Unload";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"canunloadincombat (vehicle _this) && {_this distance2d _destination < 4}"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 18;
                                        priority = 0.000000;
                                        to="Reset_vehicle";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Unload">*/
                class Unload
                {
                        name = "Unload";
                        itemno = 60;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// unload cargo --- this should be a proper function! " \n
                         "_crew = fullCrew [vehicle _this,""cargo"",false]; " \n
                         "_crew = _crew select {!isPlayer _x && {!(lifeState _x isEqualTo ""UNCONSCIOUS"")}}; " \n
                         "" \n
                         "// force out! " \n
                         "{" \n
                         "	[_x] orderGetIn false;" \n
                         "	true " \n
                         "} count _crew; "/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Rest">*/
                                class Rest
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Check_queue__and";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Jink_">*/
                class Jink_
                {
                        name = "Jink_";
                        itemno = 62;
                        init = /*%FSM<STATEINIT""">*/"// debug " \n
                         "//systemchat ""VEHICLE JINK"";" \n
                         "" \n
                         "// timeout " \n
                         "_timeout = _timeout + random 4; " \n
                         "" \n
                         "// execute jink " \n
                         "_destination = [_this] call lambs_danger_fnc_vehicleJink; " \n
                         "" \n
                         "// Share information!" \n
                         "[_this,(_this findNearestEnemy _this),lambs_danger_CQB_range + random 100,true] call lambs_danger_fnc_shareInformation;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Timeout__Destina">*/
                                class Timeout__Destina
                                {
                                        itemno = 63;
                                        priority = 0.000000;
                                        to="Reset_vehicle";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_this distance2d _destination < 2 || {time > _timeout}"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Pre_attack">*/
                class Pre_attack
                {
                        name = "Pre_attack";
                        itemno = 64;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// time out " \n
                         "_timeout = time + 5 + random 4;" \n
                         "" \n
                         "// look at " \n
                         "_this lookAt _dangerCausedBy; " \n
                         "" \n
                         "// assault " \n
                         "private _assault = _this distance2d _dangerCausedBy < (lambs_danger_CQB_range + random 30);" \n
                         "" \n
                         "// coward" \n
                         "private _coward = (!_CQCmode) && {[_this,_dangerCausedBy] call lambs_danger_fnc_coward};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "CQC">*/
                                class CQC
                                {
                                        itemno = 53;
                                        priority = 4.000000;
                                        to="Clear_buildings";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_CQCmode && {_assault}"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Coward">*/
                                class Coward
                                {
                                        itemno = 66;
                                        priority = 1.000000;
                                        to="Coward";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_coward"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Always">*/
                                class Always
                                {
                                        itemno = 65;
                                        priority = 0.000000;
                                        to="Attack___Suppress";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Coward">*/
                class Coward
                {
                        name = "Coward";
                        itemno = 67;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// time out" \n
                         "_timeout = _timeout + 4;" \n
                         "" \n
                         "// testing Diwako hide " \n
                         "private _hide = [_this,_dangerCausedBy] call lambs_danger_fnc_findCover;" \n
                         "if !(_hide isEqualTo []) then {" \n
                         "    private _coverPos = _hide select 0;" \n
                         "    _this doMove (_coverPos select 0);" \n
                         "    _this setUnitPosWeak (_coverPos select 1);" \n
                         "};" \n
                         "" \n
                         "//[_this,_dangerCausedBy] call lambs_danger_fnc_hideInside; // disabled to reduce break up of squad formation" \n
                         "" \n
                         "// update leader-mode" \n
                         "[_this,2,_dangerCausedby] call lambs_danger_fnc_leaderMode;" \n
                         "" \n
                         "// Share information!" \n
                         "//[_this,_dangerCausedBy,lambs_danger_CQB_range + random 100,true] call lambs_danger_fnc_shareInformation;" \n
                         "" \n
                         "// debug " \n
                         "//systemchat format [""%1 - Coward! - %2s"",side _this,round (_timeout - time)];"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 26;
                                        priority = 0.000000;
                                        to="Timeout__Continu";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Clear_buildings">*/
                class Clear_buildings
                {
                        name = "Clear_buildings";
                        itemno = 68;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// time out " \n
                         "_timeout = time + 20;" \n
                         "private _timeoutCQC = time + 2 + random 4; " \n
                         "" \n
                         "// leaders update buildings " \n
                         "if (isFormationLeader _this || {(group _this getVariable [""lambs_danger_inCQC"",[]])  isEqualTo []}) then {" \n
                         "	[_this,100] call lambs_danger_fnc_leaderCQC; " \n
                         "}; " \n
                         "" \n
                         "// set speed" \n
                         "_this forceSpeed 2;" \n
                         "" \n
                         "// methodical sweep of buildings " \n
                         "[_this] call lambs_danger_fnc_assaultBuilding;" \n
                         "" \n
                         "// debug " \n
                         "//systemchat format [""%1 - CQC! - %2 for %3s"",side _this,count _buildings,round (_timeout - time)];" \n
                         "" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Cycle_">*/
                                class Cycle_
                                {
                                        itemno = 69;
                                        priority = 1.000000;
                                        to="Clear_buildings";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeoutCQC"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Player_formation">*/
                                class Player_formation
                                {
                                        itemno = 77;
                                        priority = 0.000000;
                                        to="Timeout__Continu";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"isPlayer formationLeader _this"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 26;
                                        priority = 0.000000;
                                        to="Timeout__Continu";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Suppression">*/
                class Suppression
                {
                        name = "Suppression";
                        itemno = 72;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// timeout " \n
                         "_timeout = 15 + random 8; " \n
                         "" \n
                         "// suppression " \n
                         "if (_attack) then {" \n
                         "	[_this,_dangerPos] call lambs_danger_fnc_vehicleSuppress;" \n
                         "}; " \n
                         "" \n
                         "// get out if enemy near" \n
                         "if ((_this findNearestEnemy _dangerPos) distance _this < (6 + random 15)) then {" \n
                         "	[_this] orderGetIn false;" \n
                         "	_this setSuppression 0.94; 	// to prevent instant laser aim on exiting vehicle" \n
                         "}; "/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 18;
                                        priority = 0.000000;
                                        to="Reset_vehicle";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Artillery__none">*/
                class Artillery__none
                {
                        name = "Artillery__none";
                        itemno = 80;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// health " \n
                         "_health = damage _this; " \n
                         "" \n
                         "// timeout " \n
                         "_timeout = 20 + random 8; "/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Got_hit__Danger">*/
                                class Got_hit__Danger
                                {
                                        itemno = 61;
                                        priority = 2.000000;
                                        to="Jink_";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"(_health < damage (vehicle _this)) || {_dangerCausedBy distance (vehicle _this) < 20}"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 18;
                                        priority = 0.000000;
                                        to="Reset_vehicle";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
        };
        initState="Reacting_on_danger";
        finalStates[] =
        {
                "End",
        };
};
/*%FSM</COMPILE>*/