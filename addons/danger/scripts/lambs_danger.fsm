/*%FSM<COMPILE "scriptedFSM.cfg, Danger">*/
/*%FSM<HEAD>*/
/*
item0[] = {"Player_or__not_l",4,218,1100.000000,-525.000000,1225.000000,-450.000000,12.000000,"Player or " \n "not local"};
item1[] = {"DEFINE_ENUM_BEG",-1,250,-1275.000000,-775.000000,-925.000000,-600.000000,0.000000,"DEFINE_ENUM_BEG(DangerCause)" \n "  DCEnemyDetected, // the first enemy detected" \n "  DCFire, // fire visible" \n "  DCHit, // vehicle hit" \n "  DCEnemyNear, // enemy very close to me" \n "  DCExplosion, // explosion detected" \n "  DCDeadBodyGroup, // dead soldier from my group found" \n "  DCDeadBody, // other dead soldier found" \n "  DCScream // hit soldier screaming" \n "DEFINE_ENUM_END(DangerCause)" \n ""};
item2[] = {"Attack",4,218,125.000000,0.000000,225.000000,50.000000,1.000000,"Attack"};
item3[] = {"End",1,250,1125.000000,775.000000,1200.000000,825.000000,0.000000,"End"};
item4[] = {"Rest",8,218,-550.000000,600.000000,-450.000000,650.000000,0.000000,"Rest"};
item5[] = {"Reacting_on_danger",0,250,-575.000000,-675.000000,-425.000000,-625.000000,0.000000,"Reacting on danger!"};
item6[] = {"Check_queue__and",2,250,950.000000,600.000000,1025.000000,650.000000,0.000000,"Check queue " \n "and " \n "clean-up"};
item7[] = {"Next__cause",4,218,925.000000,-375.000000,1000.000000,-325.000000,1.000000,"Next  cause"};
item8[] = {"Always",8,218,950.000000,775.000000,1025.000000,825.000000,0.000000,"Always"};
item9[] = {"Exit_Variables",4,218,1000.000000,-450.000000,1100.000000,-400.000000,12.000000,"Exit Variables"};
item10[] = {"Begin",8,218,-575.000000,-575.000000,-425.000000,-475.000000,0.000000,"Begin"};
item11[] = {"Ready",2,250,-775.000000,-400.000000,-225.000000,-325.000000,0.000000,"Ready"};
item12[] = {"Vehicle",4,218,-800.000000,-275.000000,-525.000000,-125.000000,2.000000,"Vehicle"};
item13[] = {"Infantry",4,218,-450.000000,-275.000000,-200.000000,-125.000000,1.000000,"Infantry"};
item14[] = {"Ready_Vehicle",2,250,-825.000000,-75.000000,-725.000000,-25.000000,0.000000,"Ready Vehicle"};
item15[] = {"Ready_Infantry",2,250,-200.000000,-75.000000,-100.000000,-25.000000,0.000000,"Ready Infantry"};
item16[] = {"Tank_Attack",4,218,-925.000000,25.000000,-825.000000,75.000000,4.000000,"Tank" \n "Attack"};
item17[] = {"Attack____Suppress",2,250,-925.000000,150.000000,-825.000000,200.000000,0.000000,"Attack " \n "+ Suppress" \n ""};
item18[] = {"Timeout",4,218,-925.000000,300.000000,-825.000000,350.000000,0.000000,"Timeout"};
item19[] = {"Reset_vehicle",2,250,-925.000000,500.000000,-825.000000,550.000000,0.000000,"Reset vehicle"};
item20[] = {"",7,210,171.000000,-53.999985,179.000000,-46.000015,0.000000,""};
item21[] = {"Panic",4,218,-350.000000,0.000000,-250.000000,50.000000,8.000000,"Panic"};
item22[] = {"Panic_",2,250,-350.000000,75.000000,-250.000000,125.000000,0.000000,"Panic!"};
item23[] = {"Timeout",4,218,-350.000000,175.000000,-250.000000,225.000000,0.000000,"Timeout"};
item24[] = {"Reset_Panic___Co",2,250,-350.000000,275.000000,-250.000000,325.000000,0.000000,"Reset Panic: " \n "Continue"};
item25[] = {"Attack___Suppress",2,250,50.000000,225.000000,150.000000,275.000000,0.000000,"Attack" \n "+ Suppress" \n "+ Assault"};
item26[] = {"Timeout",4,218,150.000000,325.000000,250.000000,375.000000,0.000000,"Timeout"};
item27[] = {"Killed",4,218,0.000000,325.000000,100.000000,375.000000,0.000000,"Killed"};
item28[] = {"Killed___Continu",2,250,0.000000,425.000000,100.000000,475.000000,0.000000,"Killed: " \n "Continue"};
item29[] = {"Timeout__Continu",2,250,150.000000,425.000000,250.000000,475.000000,0.000000,"Timeout:" \n "Continue"};
item30[] = {"____FUNCTIONS__lambs",-1,250,-1550.000000,-775.000000,-1300.000000,-225.000000,0.000000,"// FUNCTIONS " \n "lambs_danger_fnc_assault" \n "lambs_danger_fnc_assaultBuilding" \n "lambs_danger_fnc_assaultCQB " \n "lambs_danger_fnc_checkBody " \n "lambs_danger_fnc_coward" \n "lambs_danger_fnc_gesture" \n "lambs_danger_fnc_findBuilding;" \n "lambs_danger_fnc_findCover;" \n "lambs_danger_fnc_findOverwatch;" \n "lambs_danger_fnc_fleeing;" \n "lambs_danger_fnc_hideInside " \n "lambs_danger_fnc_immediateAction" \n "lambs_danger_fnc_indoor " \n "lambs_danger_fnc_panic " \n "lambs_danger_fnc_shareInformation " \n "lambs_danger_fnc_shareInformationRange" \n "lambs_danger_fnc_suppress " \n "lambs_danger_fnc_vehicleAssault " \n "lambs_danger_fnc_vehicleJink " \n "lambs_danger_fnc_vehicleRotate" \n "lambs_danger_fnc_vehicleSuppress " \n "lambs_danger_fnc_eventCallback" \n "" \n "// FUNCTIONS ~ leader" \n "lambs_danger_fnc_leaderArtillery " \n "lambs_danger_fnc_leaderAssess" \n "lambs_danger_fnc_leaderContact" \n "lambs_danger_fnc_leaderCQC" \n "lambs_danger_fnc_leaderHide" \n "lambs_danger_fnc_leaderManoeuvre " \n "lambs_danger_fnc_leaderMode " \n "lambs_danger_fnc_leaderModeUpdate " \n "" \n "// FUNCTIONS ~ debug " \n "lambs_danger_fnc_debugDangerType" \n "lambs_danger_fnc_debugMarkerColor" \n "lambs_danger_fnc_debugObjectColor" \n "lambs_danger_fnc_dotMarker" \n "lambs_danger_fnc_zoneMarker"};
item31[] = {"React",4,218,-250.000000,0.000000,-150.000000,50.000000,4.000000,"React"};
item32[] = {"Reaction__to_contact",2,250,-250.000000,75.000000,-150.000000,125.000000,0.000000,"Reaction " \n "to contact" \n ""};
item33[] = {"Investigate",4,218,-125.000000,0.000000,-25.000000,50.000000,2.000000,"Investigate"};
item34[] = {"Investigate",2,250,-125.000000,75.000000,-25.000000,125.000000,0.000000,"Investigate"};
item35[] = {"Timeout",4,218,-125.000000,175.000000,-25.000000,225.000000,0.000000,"Timeout"};
item36[] = {"Reset_Investigate",2,250,-125.000000,275.000000,-25.000000,325.000000,0.000000,"Reset Investigate: " \n "Continue"};
item37[] = {"Leader",4,218,300.000000,-175.000000,400.000000,-100.000000,5.000000,"Leader"};
item38[] = {"Ready_Leader__",2,250,300.000000,-50.000000,400.000000,0.000000,0.000000,"" \n "Ready Leader" \n "" \n ""};
item39[] = {"Leader___Continu",2,250,300.000000,525.000000,400.000000,575.000000,0.000000,"Leader: " \n "Continue"};
item40[] = {"Leader_Assess",4,218,-25.000000,0.000000,75.000000,50.000000,3.000000,"Leader" \n "Assess"};
item41[] = {"Action_Needed",4,218,525.000000,-50.000000,625.000000,0.000000,2.000000,"Action Needed"};
item42[] = {"Evaluate",2,250,525.000000,50.000000,625.000000,100.000000,0.000000,"Evaluate"};
item43[] = {"Assess___Continu",2,250,-25.000000,75.000000,75.000000,125.000000,0.000000,"Assess: " \n "Continue"};
item44[] = {"___Contact",4,218,425.000000,200.000000,525.000000,250.000000,0.000000,"1" \n "Contact"};
item45[] = {"Contact___Contin",2,250,425.000000,275.000000,525.000000,325.000000,0.000000,"Contact: " \n "Continue"};
item46[] = {"___Hide_",4,218,525.000000,200.000000,625.000000,250.000000,1.000000,"2" \n "Hide!"};
item47[] = {"Hide_from_target",2,250,525.000000,300.000000,625.000000,350.000000,0.000000,"Hide from target!" \n "Continue"};
item48[] = {"Timeout",4,218,425.000000,425.000000,525.000000,475.000000,0.000000,"Timeout"};
item49[] = {"___Artillery",4,218,775.000000,200.000000,875.000000,250.000000,1.000000,"6" \n "Artillery"};
item50[] = {"Artillery___Cont",2,250,775.000000,425.000000,875.000000,475.000000,0.000000,"Artillery: " \n "Continue"};
item51[] = {"___Manoeuvre",4,218,625.000000,200.000000,725.000000,250.000000,1.000000,"3" \n "Manoeuvre"};
item52[] = {"Manoeuvre___Cont",2,250,625.000000,325.000000,725.000000,375.000000,0.000000,"Manoeuvre: " \n "Continue"};
item53[] = {"CQC",4,218,250.000000,150.000000,350.000000,200.000000,4.000000,"CQC"};
item54[] = {"Panic",4,218,-250.000000,175.000000,-150.000000,225.000000,0.000000,"Panic"};
item55[] = {"Cargo_or__driver",4,218,-725.000000,25.000000,-625.000000,75.000000,0.000000,"Cargo or " \n "driver"};
item56[] = {"Ready_1",2,250,-725.000000,150.000000,-625.000000,200.000000,0.000000,"Ready"};
item57[] = {"Investigate",4,218,-825.000000,25.000000,-725.000000,75.000000,3.000000,"Investigate"};
item58[] = {"Investigate__Unload",2,250,-825.000000,150.000000,-725.000000,200.000000,0.000000,"Investigate" \n "+Unload cargo"};
item59[] = {"Reached__destina",4,218,-825.000000,300.000000,-725.000000,350.000000,0.000000,"Reached " \n "destination"};
item60[] = {"Unload",2,250,-825.000000,400.000000,-725.000000,450.000000,0.000000,"Unload"};
item61[] = {"Got_hit__Danger",4,218,-1050.000000,300.000000,-950.000000,350.000000,2.000000,"Got hit!" \n "Danger close!"};
item62[] = {"Jink_",2,250,-1050.000000,400.000000,-950.000000,450.000000,0.000000,"Jink!"};
item63[] = {"Timeout__Destina",4,218,-1050.000000,500.000000,-950.000000,550.000000,0.000000,"Timeout " \n "Destination"};
item64[] = {"Pre_attack",2,250,125.000000,75.000000,225.000000,125.000000,0.000000,"Pre-attack"};
item65[] = {"Always",4,218,50.000000,150.000000,150.000000,200.000000,0.000000,"Always"};
item66[] = {"Coward",4,218,150.000000,150.000000,250.000000,200.000000,1.000000,"Coward"};
item67[] = {"Coward",2,250,150.000000,225.000000,250.000000,275.000000,0.000000,"Coward"};
item68[] = {"Clear_buildings",2,250,250.000000,225.000000,350.000000,275.000000,0.000000,"Clear buildings"};
item69[] = {"Cycle_",4,218,325.000000,325.000000,425.000000,375.000000,1.000000,"Cycle!"};
item70[] = {"",7,210,-466.500000,-41.500000,-458.500000,-33.500000,0.000000,""};
item71[] = {"Static",4,218,-1025.000000,25.000000,-925.000000,75.000000,1.000000,"Static"};
item72[] = {"Suppression",2,250,-1025.000000,150.000000,-925.000000,200.000000,0.000000,"Suppression"};
item73[] = {"LEADER_EVALUATIONS",-1,250,675.000000,25.000000,900.000000,75.000000,0.000000,"LEADER EVALUATIONS AND ACTIONS"};
item74[] = {"Close_Quarters_C",-1,250,275.000000,75.000000,400.000000,125.000000,0.000000,"Close" \n "Quarters" \n "Combat"};
item75[] = {"LAMBS_DANGER_FSM",-1,250,-1700.000000,-925.000000,-800.000000,-800.000000,0.000000,"LAMBS DANGER FSM 2.0.0"};
item76[] = {"Player_formation",4,218,275.000000,350.000000,375.000000,400.000000,0.000000,"Player" \n "formationleader"};
item77[] = {"EXIT_VARIABLES_Unconcious",-1,250,1200.000000,-425.000000,1425.000000,-350.000000,0.000000,"EXIT VARIABLES" \n "Unconcious" \n "Fleeing" \n "lambs_danger_disableAI"};
item78[] = {"Artillery",4,218,-1125.000000,25.000000,-1025.000000,75.000000,5.000000,"Artillery"};
item79[] = {"Artillery__none",2,250,-1125.000000,150.000000,-1025.000000,200.000000,0.000000,"Artillery:" \n "none"};
item80[] = {"Move_",4,218,-450.000000,0.000000,-350.000000,50.000000,6.000000,"Move!"};
item81[] = {"Force_move",2,250,-450.000000,75.000000,-350.000000,125.000000,0.000000,"Force move"};
item82[] = {"Timeout",4,218,-450.000000,175.000000,-350.000000,225.000000,0.000000,"Timeout"};
item83[] = {"Reset_move___Con",2,250,-450.000000,275.000000,-350.000000,325.000000,0.000000,"Reset move: " \n "Continue"};
version=1;
class LayoutItems
{
	class Item1
	{
		class ItemInfo
		{
			FontFace="Arial";
			FontHeight=10;
			lStyle=1;
			Align=0;
		};
	};
	class Item30
	{
		class ItemInfo
		{
			FontFace="Arial";
			FontHeight=10;
			lStyle=1;
			Align=0;
		};
	};
	class Item73
	{
		class ItemInfo
		{
			FontFace="Arial";
			FontHeight=10;
			lStyle=1;
		};
	};
	class Item74
	{
		class ItemInfo
		{
			FontFace="Arial";
			FontHeight=10;
			lStyle=1;
		};
	};
	class Item75
	{
		class ItemInfo
		{
			FontFace="Arial";
			FontHeight=20;
			lStyle=1;
		};
	};
	class Item77
	{
		class ItemInfo
		{
			FontFace="Arial";
			FontHeight=10;
			lStyle=1;
		};
	};
};
link0[] = {0,3};
link1[] = {2,64};
link2[] = {4,6};
link3[] = {5,0};
link4[] = {5,10};
link5[] = {6,7};
link6[] = {6,8};
link7[] = {7,11};
link8[] = {8,3};
link9[] = {9,3};
link10[] = {10,11};
link11[] = {11,4};
link12[] = {11,9};
link13[] = {11,12};
link14[] = {11,13};
link15[] = {12,14};
link16[] = {13,15};
link17[] = {14,16};
link18[] = {14,55};
link19[] = {14,57};
link20[] = {14,71};
link21[] = {14,78};
link22[] = {15,20};
link23[] = {15,21};
link24[] = {15,31};
link25[] = {15,33};
link26[] = {15,37};
link27[] = {15,40};
link28[] = {15,70};
link29[] = {15,80};
link30[] = {16,17};
link31[] = {17,18};
link32[] = {17,61};
link33[] = {18,19};
link34[] = {19,4};
link35[] = {20,2};
link36[] = {21,22};
link37[] = {22,23};
link38[] = {23,24};
link39[] = {24,4};
link40[] = {25,26};
link41[] = {25,27};
link42[] = {26,29};
link43[] = {27,28};
link44[] = {28,4};
link45[] = {29,4};
link46[] = {31,32};
link47[] = {32,23};
link48[] = {32,54};
link49[] = {33,34};
link50[] = {34,35};
link51[] = {34,54};
link52[] = {35,36};
link53[] = {36,4};
link54[] = {37,38};
link55[] = {38,41};
link56[] = {39,4};
link57[] = {40,43};
link58[] = {41,42};
link59[] = {42,44};
link60[] = {42,46};
link61[] = {42,49};
link62[] = {42,51};
link63[] = {43,35};
link64[] = {44,45};
link65[] = {45,48};
link66[] = {46,47};
link67[] = {47,48};
link68[] = {48,39};
link69[] = {49,50};
link70[] = {50,48};
link71[] = {51,52};
link72[] = {52,48};
link73[] = {53,68};
link74[] = {54,22};
link75[] = {55,56};
link76[] = {56,4};
link77[] = {57,58};
link78[] = {58,18};
link79[] = {58,59};
link80[] = {59,60};
link81[] = {60,4};
link82[] = {61,62};
link83[] = {62,63};
link84[] = {63,19};
link85[] = {64,53};
link86[] = {64,65};
link87[] = {64,66};
link88[] = {65,25};
link89[] = {66,67};
link90[] = {67,26};
link91[] = {68,26};
link92[] = {68,69};
link93[] = {68,76};
link94[] = {69,68};
link95[] = {70,4};
link96[] = {71,72};
link97[] = {72,18};
link98[] = {76,29};
link99[] = {78,79};
link100[] = {79,18};
link101[] = {79,61};
link102[] = {80,81};
link103[] = {81,82};
link104[] = {82,83};
link105[] = {83,4};
globals[] = {0.000000,0,0,0,0,640,480,2,407,6316128,1,-173.004471,365.307007,729.020264,174.396301,858,884,1};
window[] = {2,-1,-1,-1,-1,891,78,880,78,3,876};
*//*%FSM</HEAD>*/
class FSM
{
        fsmName = "Danger";
        class States
        {
                /*%FSM<STATE "End">*/
                class End
                {
                        name = "End";
                        itemno = 3;
                        init = /*%FSM<STATEINIT""">*/"// debug" \n
                         "//systemchat format [""%1 - DANGER.FSM ENDS FOR %2"",side _this, name _this]; " \n
                         "" \n
                         "// reset variable" \n
                         "_this setVariable [""lambs_danger_currentTarget"",nil];" \n
                         "_this setVariable [""lambs_danger_currentTask"",nil];" \n
                         "" \n
                         "// reset" \n
                         "_this lookAt objNull;" \n
                         "" \n
                         "// fleeing" \n
                         "if (fleeing _this) then {" \n
                         "	[_this] call lambs_danger_fnc_fleeing;" \n
                         "}; " \n
                         "" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Reacting_on_danger">*/
                class Reacting_on_danger
                {
                        name = "Reacting_on_danger";
                        itemno = 5;
                        init = /*%FSM<STATEINIT""">*/"// DEBUG" \n
                         "//if (lambs_danger_debug_FSM) then {systemchat format [""Danger.fsm - Init - %1 at %2s"",side _this,round time];};" \n
                         "" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Player_or__not_l">*/
                                class Player_or__not_l
                                {
                                        itemno = 0;
                                        priority = 12.000000;
                                        to="End";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!local _this " \n
                                         "|| {isPlayer _this} " \n
                                         "|| {behaviour _this isEqualTo ""CARELESS""}"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Begin">*/
                                class Begin
                                {
                                        itemno = 10;
                                        priority = 0.000000;
                                        to="Ready";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Check_queue__and">*/
                class Check_queue__and
                {
                        name = "Check_queue__and";
                        itemno = 6;
                        init = /*%FSM<STATEINIT""">*/"//systemchat format [""%1 Danger.fsm RESET (%2)"",side _this,_dangerCause call lambs_danger_fnc_debugDangerType];" \n
                         "//systemchat format [""%1 half reset %2 - %3"",side _this, name _this, count _queue];" \n
                         "	" \n
                         "// more advanced reset" \n
                         "if !(alive _dangerCausedBy && {_this distance2d _dangerCausedBy < (lambs_danger_CQB_range* 0.66)}) then {" \n
                         "	_this forceSpeed -1;" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Next__cause">*/
                                class Next__cause
                                {
                                        itemno = 7;
                                        priority = 1.000000;
                                        to="Ready";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"count _queue > 0"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Always">*/
                                class Always
                                {
                                        itemno = 8;
                                        priority = 0.000000;
                                        to="End";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Ready">*/
                class Ready
                {
                        name = "Ready";
                        itemno = 11;
                        init = /*%FSM<STATEINIT""">*/"/*" \n
                         "comment ""0  DCEnemyDetected"";" \n
                         "comment ""1  DCFire"";" \n
                         "comment ""2  DCHit"";" \n
                         "comment ""3  DCEnemyNear"";" \n
                         "comment ""4  DCExplosion"";" \n
                         "comment ""5  DCDeadBodyGroup"";" \n
                         "comment ""6  DCDeadBody"";" \n
                         "comment ""7  DCScream"";" \n
                         "comment ""8  DCCanFire"";" \n
                         "comment ""9  DCBulletClose"";" \n
                         "*/" \n
                         "" \n
                         "// init" \n
                         "private [""_dangerCause""];" \n
                         "private _priorCur = [-1, lambs_danger_fsmPriorities select _dangerCause] select (_dangerCause > 0);" \n
                         "{" \n
                         "	private _cause = _x select 0;" \n
                         "	if ((lambs_danger_fsmPriorities select _cause) > _priorCur) then {" \n
                         "		_dangerCause = _cause;" \n
                         "		_dangerPos = _x select 1;" \n
                         "		_dangerUntil = _x select 2;" \n
                         "		_dangerCausedBy = _x select 3;" \n
                         "	};" \n
                         "	true " \n
                         "} count _queue;" \n
                         "" \n
                         "// settings" \n
                         "_this setVariable [""lambs_danger_FSMDangerCauseData"", [_dangerCause, _dangerPos, _dangerUntil, _dangerCausedBy]];" \n
                         "" \n
                         "// other settings " \n
                         "private _dangerMode = group _this getVariable [""lambs_danger_dangerMode"",[ [], [], true, time]]; " \n
                         "private _CQCmode = (formation group _this) in lambs_danger_CQB_formations;" \n
                         "" \n
                         "// reset dangerMode" \n
                         "if ( (_dangerMode select 3) < (time + 5)) then {_dangerMode set [2, true];};" \n
                         "" \n
                         "// clear queue" \n
                         "_queue = [];" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Exit_Variables">*/
                                class Exit_Variables
                                {
                                        itemno = 9;
                                        priority = 12.000000;
                                        to="End";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_this call lambs_danger_fnc_fsmExitVariables"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Vehicle">*/
                                class Vehicle
                                {
                                        itemno = 12;
                                        priority = 2.000000;
                                        to="Ready_Vehicle";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(isNull ObjectParent _this)"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Infantry">*/
                                class Infantry
                                {
                                        itemno = 13;
                                        priority = 1.000000;
                                        to="Ready_Infantry";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Rest">*/
                                class Rest
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Check_queue__and";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Ready_Vehicle">*/
                class Ready_Vehicle
                {
                        name = "Ready_Vehicle";
                        itemno = 14;
                        init = /*%FSM<STATEINIT""">*/"// debug" \n
                         "if (lambs_danger_debug_FSM) then {systemchat format [""%1 - Vehicle Danger! - %2"",side _this,_dangerCause call lambs_danger_fnc_debugDangerType]};" \n
                         "" \n
                         "// settings " \n
                         "_tank = (vehicle _this) isKindOf ""Tank"" || {(vehicle _this) isKindOf ""Wheeled_APC_F""}; " \n
                         "_static = (vehicle _this) isKindOf ""StaticWeapon""; " \n
                         "_artillery = (vehicle _this) getVariable [""lambs_danger_isArtillery"", getNumber (configFile >> ""CfgVehicles"" >> (typeOf (vehicle _this)) >> ""artilleryScanner"") > 0];" \n
                         "" \n
                         "// commander" \n
                         "_commander = (effectiveCommander (vehicle _this)) isEqualTo _this; " \n
                         "" \n
                         "// attack is appropriate " \n
                         "_attack = _dangerCause in [0,2,8,9]; " \n
                         "" \n
                         "// investigate bodies?  <-- disabled for now" \n
                         "//_investigate = _dangerCause in [5,6];" \n
                         "" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Artillery">*/
                                class Artillery
                                {
                                        itemno = 78;
                                        priority = 5.000000;
                                        to="Artillery__none";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_artillery"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Tank_Attack">*/
                                class Tank_Attack
                                {
                                        itemno = 16;
                                        priority = 4.000000;
                                        to="Attack____Suppress";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_tank " \n
                                         "&& {_attack} " \n
                                         "&& {_commander}"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Investigate">*/
                                class Investigate
                                {
                                        itemno = 57;
                                        priority = 3.000000;
                                        to="Investigate__Unload";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"false"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Static">*/
                                class Static
                                {
                                        itemno = 71;
                                        priority = 1.000000;
                                        to="Suppression";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_static"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Cargo_or__driver">*/
                                class Cargo_or__driver
                                {
                                        itemno = 55;
                                        priority = 0.000000;
                                        to="Ready_1";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Ready_Infantry">*/
                class Ready_Infantry
                {
                        name = "Ready_Infantry";
                        itemno = 15;
                        init = /*%FSM<STATEINIT""">*/"// debug" \n
                         "if (lambs_danger_debug_FSM) then {systemchat format [""%1 - Danger! - %2"",side _this,_dangerCause call lambs_danger_fnc_debugDangerType]};" \n
                         "" \n
                         "// immediate action" \n
                         "if (random 1 > 0.2  && {_dangerCause isEqualTo 2}) then {" \n
                         "	[_this, stance _this] call lambs_danger_fnc_immediateAction;" \n
                         "}; " \n
                         "" \n
                         "// Panic when suppression level is high " \n
                         "private _panic = random 100 < lambs_danger_panic_chance && {((getSuppression _this) >.80)};" \n
                         "" \n
                         "// React to fire when source of danger is distant or unkown" \n
                         "private _react = !_CQCmode && {_dangerMode select 2};" \n
                         "" \n
                         "// Investigate dead bodies when enemies are out of sight " \n
                         "private _investigate = _dangerCause in [5, 6] && {_this distance2d _dangerPos < (20 + random  10)};" \n
                         "" \n
                         "// identify leader" \n
                         "private _leader = leader group _this isEqualTo _this && { count units _this > 1} && { getSuppression _this < 0.5};" \n
                         "private _assess = _leader && {(_dangerMode select 3) < (time + 300)}; " \n
                         "" \n
                         "// force move" \n
                         "private _forceMove = _this getVariable [""lambs_danger_forceMove"", false];" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Panic">*/
                                class Panic
                                {
                                        itemno = 21;
                                        priority = 8.000000;
                                        to="Panic_";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_panic"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Move_">*/
                                class Move_
                                {
                                        itemno = 80;
                                        priority = 6.000000;
                                        to="Force_move";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_forceMove"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Leader">*/
                                class Leader
                                {
                                        itemno = 37;
                                        priority = 5.000000;
                                        to="Ready_Leader__";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_leader " \n
                                         "&&  {!((_dangerMode select 0) isEqualTo [])}"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "React">*/
                                class React
                                {
                                        itemno = 31;
                                        priority = 4.000000;
                                        to="Reaction__to_contact";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_react"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Leader_Assess">*/
                                class Leader_Assess
                                {
                                        itemno = 40;
                                        priority = 3.000000;
                                        to="Assess___Continu";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_assess"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Investigate">*/
                                class Investigate
                                {
                                        itemno = 33;
                                        priority = 2.000000;
                                        to="Investigate";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_investigate"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Attack">*/
                                class Attack
                                {
                                        itemno = 2;
                                        priority = 1.000000;
                                        to="Pre_attack";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"alive _dangerCausedBy"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Rest">*/
                                class Rest
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Check_queue__and";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Attack____Suppress">*/
                class Attack____Suppress
                {
                        name = "Attack____Suppress";
                        itemno = 17;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// health " \n
                         "_health = damage _this; " \n
                         "" \n
                         "// timeout " \n
                         "_timeout = 7 + random 9; " \n
                         "" \n
                         "// tank assault " \n
                         "if (speed (vehicle _this) < 10) then {" \n
                         "" \n
                         "	// rotate +  suppression (internal to vehicle rotate) " \n
                         "	[vehicle _this, _dangerCausedBy] call lambs_danger_fnc_vehicleRotate; " \n
                         "	" \n
                         "	// assault " \n
                         "	[" \n
                         "		{" \n
                         "			_this call lambs_danger_fnc_vehicleAssault;" \n
                         "		}, [_this, _dangerPos,_dangerCausedBy], ( 3 + random 3 )" \n
                         "	] call CBA_fnc_waitAndExecute;" \n
                         "}; "/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Got_hit__Danger">*/
                                class Got_hit__Danger
                                {
                                        itemno = 61;
                                        priority = 2.000000;
                                        to="Jink_";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"(_health < damage (vehicle _this)) || {_dangerCausedBy distance (vehicle _this) < 20}"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 18;
                                        priority = 0.000000;
                                        to="Reset_vehicle";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Reset_vehicle">*/
                class Reset_vehicle
                {
                        name = "Reset_vehicle";
                        itemno = 19;
                        init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Rest">*/
                                class Rest
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Check_queue__and";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Panic_">*/
                class Panic_
                {
                        name = "Panic_";
                        itemno = 22;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// suppression code " \n
                         "_delay = [_this, _dangerCausedBy] call lambs_danger_fnc_panic; " \n
                         "" \n
                         "// time out " \n
                         "_timeout = time + _delay; " \n
                         "" \n
                         "// debug " \n
                         "if (lambs_danger_debug_FSM) then {" \n
                         "" \n
                         "	/// msg " \n
                         "	systemchat format [""%1 - PANIC! - %2 for %3s"",side _this,name _this,round (_timeout - time)];" \n
                         "" \n
                         "	// markers " \n
                         "	[_this,format [""PANIC -- %1"",name _this],""ColorKhaki"",""hd_Destroy""] call lambs_danger_fnc_dotMarker; " \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 23;
                                        priority = 0.000000;
                                        to="Reset_Panic___Co";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Reset_Panic___Co">*/
                class Reset_Panic___Co
                {
                        name = "Reset_Panic___Co";
                        itemno = 24;
                        init = /*%FSM<STATEINIT""">*/"// reset panic here " \n
                         "" \n
                         "// stance" \n
                         "_this setUnitPos ""AUTO"";" \n
                         "_this forceSpeed -1;"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Rest">*/
                                class Rest
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Check_queue__and";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Attack___Suppress">*/
                class Attack___Suppress
                {
                        name = "Attack___Suppress";
                        itemno = 25;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// Can fire -- delay for a bit  " \n
                         "if (random 1 > 0.3 && { (_dangerCause in [8, 9]) } ) then {" \n
                         "" \n
                         "	// movement" \n
                         "	_this forceSpeed 1;" \n
                         "	_this setUnitPosWeak selectRandom [""DOWN"", ""MIDDLE""];" \n
                         "" \n
                         "	// suppress " \n
                         "	if (_this distance _dangerCausedBy > lambs_danger_minSuppression_range) then {" \n
                         "		//[_this, (_this targetKnowledge _dangerCausedBy select 6)] call lambs_danger_fnc_suppress;" \n
                         "		[_this, AGLtoASL _dangerPos] call lambs_danger_fnc_suppress;" \n
                         "" \n
                         "		// reset assault" \n
                         "		_assault = false;" \n
                         "	}; " \n
                         "" \n
                         "	// increase delay" \n
                         "	timeout = _timeout + 4 +  random 6;" \n
                         "" \n
                         "};" \n
                         "" \n
                         "// Close quarters" \n
                         "if (_assault && {_this knowsAbout _dangerCausedBy > 1}) then {" \n
                         "" \n
                         "	// movement" \n
                         "	_this forceSpeed ([_this, _dangerCausedBy] call lambs_danger_fnc_assaultSpeed);" \n
                         "" \n
                         "	// Check buildings near enemy" \n
                         "	[_this, _dangerCausedBy, 20] call lambs_danger_fnc_assault;" \n
                         "" \n
                         "	// small delay!" \n
                         "	_timeout = time + 1 + random 4; " \n
                         "" \n
                         "}; " \n
                         "" \n
                         "// debug " \n
                         "//if (lambs_danger_debug_FSM) then {systemchat format [""%1 - ATTACK! - %2 for %3s"",side _this,name _dangerCausedBy,round (_timeout - time)]};" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Killed">*/
                                class Killed
                                {
                                        itemno = 27;
                                        priority = 0.000000;
                                        to="Killed___Continu";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!alive _dangerCausedBy && {!_assault}"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 26;
                                        priority = 0.000000;
                                        to="Timeout__Continu";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Killed___Continu">*/
                class Killed___Continu
                {
                        name = "Killed___Continu";
                        itemno = 28;
                        init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Rest">*/
                                class Rest
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Check_queue__and";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Timeout__Continu">*/
                class Timeout__Continu
                {
                        name = "Timeout__Continu";
                        itemno = 29;
                        init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Rest">*/
                                class Rest
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Check_queue__and";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Reaction__to_contact">*/
                class Reaction__to_contact
                {
                        name = "Reaction__to_contact";
                        itemno = 32;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// time out " \n
                         "_timeout = time + 10 + random 6; " \n
                         "" \n
                         "// look at explosions" \n
                         "if (_dangerCause isEqualTo 4) then {" \n
                         "	_this lookAt AGLtoASL _dangerPos; " \n
                         "}; " \n
                         "" \n
                         "// react " \n
                         "[_this, _dangerPos] call lambs_danger_fnc_react;" \n
                         "" \n
                         "// debug " \n
                         "if (lambs_danger_debug_FSM) then {" \n
                         "" \n
                         "	// msg" \n
                         "	systemchat format [""%1 - REACT! - %2 for %3s"",side _this,name _this,round (_timeout - time)];" \n
                         "" \n
                         "	// marker" \n
                         "	_m = [_dangerPos,format [""REACT -- %1"",_dangerCause call lambs_danger_fnc_debugDangerType],""colorOrange"",""hd_warning""] call lambs_danger_fnc_dotMarker;" \n
                         "	if (!_leader) then {_m setMarkerSizeLocal [0.5,0.5]}; " \n
                         "" \n
                         "};" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Panic">*/
                                class Panic
                                {
                                        itemno = 54;
                                        priority = 0.000000;
                                        to="Panic_";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"(getSuppression _this) >.97"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 23;
                                        priority = 0.000000;
                                        to="Reset_Panic___Co";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Investigate">*/
                class Investigate
                {
                        name = "Investigate";
                        itemno = 34;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// time out " \n
                         "_timeout = time + 12 + random 4; " \n
                         "" \n
                         "// look at it " \n
                         "_this lookAt _dangerPos; " \n
                         "" \n
                         "// leaders gesture " \n
                         "[formationLeader _this, [""gesturePoint""]] call lambs_danger_fnc_gesture; " \n
                         "" \n
                         "// check body" \n
                         "[_this, _dangerPos] call lambs_danger_fnc_checkBody; " \n
                         "" \n
                         "// debug " \n
                         "if (lambs_danger_debug_FSM) then {" \n
                         "" \n
                         "	// msg " \n
                         "	systemchat format [""%1 - INVESTIGATING! - %2 for %3s"", side _this, name _this, round (_timeout - time)];" \n
                         "" \n
                         "	// marker" \n
                         "	[_dangerPos,format [""INVESTIGATE -- %1"", _dangerCause call lambs_danger_fnc_debugDangerType], ""colorOrange"", ""hd_dot""] call lambs_danger_fnc_dotMarker; " \n
                         "" \n
                         "}; " \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Panic">*/
                                class Panic
                                {
                                        itemno = 54;
                                        priority = 0.000000;
                                        to="Panic_";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"(getSuppression _this) >.97"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 35;
                                        priority = 0.000000;
                                        to="Reset_Investigate";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Reset_Investigate">*/
                class Reset_Investigate
                {
                        name = "Reset_Investigate";
                        itemno = 36;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// stance " \n
                         "//_this setUnitPos ""AUTO"";" \n
                         "" \n
                         "// join" \n
                         "_this doFollow (leader _this);" \n
                         "_this forceSpeed -1;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Rest">*/
                                class Rest
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Check_queue__and";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Ready_Leader__">*/
                class Ready_Leader__
                {
                        name = "Ready_Leader__";
                        itemno = 38;
                        init = /*%FSM<STATEINIT""">*/"// ready leader " \n
                         "" \n
                         "// variables " \n
                         "private [""_target""]; " \n
                         "private _units = units group _this; " \n
                         "private _evaluation = _dangerMode select 0;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Action_Needed">*/
                                class Action_Needed
                                {
                                        itemno = 41;
                                        priority = 2.000000;
                                        to="Evaluate";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Leader___Continu">*/
                class Leader___Continu
                {
                        name = "Leader___Continu";
                        itemno = 39;
                        init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Rest">*/
                                class Rest
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Check_queue__and";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Evaluate">*/
                class Evaluate
                {
                        name = "Evaluate";
                        itemno = 42;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// sort from greatest to lowest -- select greatest  (Lower number measures as higher threat!) " \n
                         "_evaluation sort true; " \n
                         "_evaluation = _evaluation select 0; "/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "___Hide_">*/
                                class ___Hide_
                                {
                                        itemno = 46;
                                        priority = 1.000000;
                                        to="Hide_from_target";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_evaluation isEqualTo 2"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "___Artillery">*/
                                class ___Artillery
                                {
                                        itemno = 49;
                                        priority = 1.000000;
                                        to="Artillery___Cont";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_evaluation isEqualTo 6"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "___Manoeuvre">*/
                                class ___Manoeuvre
                                {
                                        itemno = 51;
                                        priority = 1.000000;
                                        to="Manoeuvre___Cont";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_evaluation isEqualTo 3"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "___Contact">*/
                                class ___Contact
                                {
                                        itemno = 44;
                                        priority = 0.000000;
                                        to="Contact___Contin";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Assess___Continu">*/
                class Assess___Continu
                {
                        name = "Assess___Continu";
                        itemno = 43;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// time out " \n
                         "_timeout = time  + 4 + random 4; " \n
                         "" \n
                         "// movement" \n
                         "_this forceSpeed 0;" \n
                         "" \n
                         "// leader assessment " \n
                         "[_this, _dangerPos] call lambs_danger_fnc_leaderAssess; " \n
                         "" \n
                         "// debug " \n
                         "if (lambs_danger_debug_FSM) then {" \n
                         "" \n
                         "	// msg " \n
                         "	systemchat format [""%1 - LEADER ASSESS! - %2 for %3s"", side _this, name _this, round (_timeout - time)];" \n
                         "" \n
                         "	// marker" \n
                         "	[_this,format [""LEADER ASSESS -- %1"", _dangerCause call lambs_danger_fnc_debugDangerType], ""colorOrange"", ""hd_unknown""] call lambs_danger_fnc_dotMarker; " \n
                         " " \n
                         "}; " \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 35;
                                        priority = 0.000000;
                                        to="Reset_Investigate";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Contact___Contin">*/
                class Contact___Contin
                {
                        name = "Contact___Contin";
                        itemno = 45;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// time out " \n
                         "_timeout = -1; " \n
                         "" \n
                         "// clean array " \n
                         "[_this, _evaluation] call lambs_danger_fnc_leaderModeUpdate;" \n
                         "" \n
                         "// gesture" \n
                         "[_this, [""gestureFreeze""]] call lambs_danger_fnc_gesture;" \n
                         "" \n
                         "// find target " \n
                         "//_target = (_dangerMode select 1) select 1; <-- disabled. Produced bugged results " \n
                         "_target = _this findNearestEnemy _dangerPos;" \n
                         "" \n
                         "// execute group hide " \n
                         "[_this, _target] call lambs_danger_fnc_leaderContact;" \n
                         "" \n
                         "// debug " \n
                         "if (lambs_danger_debug_FSM) then {" \n
                         "" \n
                         "	// message " \n
                         "	systemchat format [""%1 - LEADER ACTION! - Contact"",side _this];" \n
                         "" \n
                         "	// marker " \n
                         "	[_this,format [""%1 - LEADER ACTION -- Contact!"",side _this],_this call lambs_danger_fnc_debugMarkerColor,""hd_warning""] call lambs_danger_fnc_dotMarker; " \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 48;
                                        priority = 0.000000;
                                        to="Leader___Continu";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Hide_from_target">*/
                class Hide_from_target
                {
                        name = "Hide_from_target";
                        itemno = 47;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// time out " \n
                         "_timeout = time + 20 + random 10; " \n
                         "" \n
                         "// clean array " \n
                         "[_this, _evaluation, 120] call lambs_danger_fnc_leaderModeUpdate;" \n
                         "" \n
                         "// find target " \n
                         "_target = (_dangerMode select 1) select 2;" \n
                         "" \n
                         "// execute group hide " \n
                         "[_this, _target] call lambs_danger_fnc_leaderHide;" \n
                         "" \n
                         "// debug " \n
                         "if (lambs_danger_debug_FSM) then {" \n
                         "" \n
                         "	// message " \n
                         "	systemchat format [""%1 - LEADER ACTION! - Hide"",side _this];" \n
                         "" \n
                         "	// marker " \n
                         "	[_this,format [""%1 - LEADER ACTION -- Hide!"",side _this],_this call lambs_danger_fnc_debugMarkerColor,""hd_join""] call lambs_danger_fnc_dotMarker; " \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 48;
                                        priority = 0.000000;
                                        to="Leader___Continu";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Artillery___Cont">*/
                class Artillery___Cont
                {
                        name = "Artillery___Cont";
                        itemno = 50;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// time out " \n
                         "_timeout = time + 20 + random 10; " \n
                         "" \n
                         "// movement" \n
                         "_this forceSpeed 0;" \n
                         "_this setUnitPosWeak selectRandom [""DOWN"",""MIDDLE""];	" \n
                         "" \n
                         "// find target " \n
                         "_target = (_dangerMode select 1) select 6;" \n
                         "" \n
                         "// call artillery if available " \n
                         "if !((missionNameSpace getVariable [""lambs_danger_artillery_"" + str (side _this),[]]) isEqualTo []) then {" \n
                         "" \n
                         "	// do artillery " \n
                         "	[_this, _target] call lambs_danger_fnc_leaderArtillery; " \n
                         "" \n
                         "	// clean array " \n
                         "	[_this, _evaluation] call lambs_danger_fnc_leaderModeUpdate;" \n
                         "" \n
                         "}; " \n
                         "" \n
                         "// debug " \n
                         "if (lambs_danger_debug_FSM) then {" \n
                         "" \n
                         "	// message " \n
                         "	systemchat format [""%1 - LEADER ACTION! - Call artillery"",side _this];" \n
                         "" \n
                         "	// marker " \n
                         "	[_this,format [""%1 - LEADER ACTION -- Call artillery!"",side _this],_this call lambs_danger_fnc_debugMarkerColor,""hd_warning""] call lambs_danger_fnc_dotMarker; " \n
                         "	[_target,""Artillery target"",_this call lambs_danger_fnc_debugMarkerColor,""hd_destroy""] call lambs_danger_fnc_dotMarker;" \n
                         "};" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 48;
                                        priority = 0.000000;
                                        to="Leader___Continu";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Manoeuvre___Cont">*/
                class Manoeuvre___Cont
                {
                        name = "Manoeuvre___Cont";
                        itemno = 52;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// time out " \n
                         "_timeout = time + 20 + random 10; " \n
                         "" \n
                         "// clean array " \n
                         "[_this, _evaluation, 70] call lambs_danger_fnc_leaderModeUpdate;" \n
                         "" \n
                         "// find pos " \n
                         "_target = (_dangerMode select 1) select 3;" \n
                         "" \n
                         "// execute group Manoeuvre" \n
                         "[_this, _target] call lambs_danger_fnc_leaderManoeuvre;" \n
                         "" \n
                         "// debug " \n
                         "if (lambs_danger_debug_FSM) then {" \n
                         "" \n
                         "	// message " \n
                         "	systemchat format [""%1 - LEADER ACTION! - Manoeuvre"",side _this];" \n
                         "" \n
                         "	// marker " \n
                         "	_m = [_this,format [""%1 - LEADER ACTION -- Manoeuvre!"",side _this],_this call lambs_danger_fnc_debugMarkerColor,""hd_arrow""] call lambs_danger_fnc_dotMarker; " \n
                         "	_m setMarkerDirlocal (_this getDir _target); " \n
                         "	[_target,"""",_this call lambs_danger_fnc_debugMarkerColor,""hd_objective""] call lambs_danger_fnc_dotMarker; " \n
                         "" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 48;
                                        priority = 0.000000;
                                        to="Leader___Continu";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Ready_1">*/
                class Ready_1
                {
                        name = "Ready_1";
                        itemno = 56;
                        init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Rest">*/
                                class Rest
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Check_queue__and";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Investigate__Unload">*/
                class Investigate__Unload
                {
                        name = "Investigate__Unload";
                        itemno = 58;
                        init = /*%FSM<STATEINIT""">*/"//systemchat ""VEHICLE INVESTIGATE"";" \n
                         "" \n
                         "// timeout " \n
                         "_timeout =4 + random 3; " \n
                         "" \n
                         "// destination -- should be a function " \n
                         "_destination = selectRandom (selectBestPlaces [_dangerPos, 50,""(1 + forest + trees) * (1 + houses) * (1 - sea)"",100,3] apply {_x select 0}); " \n
                         "" \n
                         "// move " \n
                         "(vehicle _this) doMove _destination; " \n
                         "" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Reached__destina">*/
                                class Reached__destina
                                {
                                        itemno = 59;
                                        priority = 0.000000;
                                        to="Unload";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"canunloadincombat (vehicle _this) && {_this distance2d _destination < 4}"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 18;
                                        priority = 0.000000;
                                        to="Reset_vehicle";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Unload">*/
                class Unload
                {
                        name = "Unload";
                        itemno = 60;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// unload cargo --- this should be a proper function! " \n
                         "_crew = fullCrew [vehicle _this,""cargo"",false]; " \n
                         "_crew = _crew select {!isPlayer _x && {!(lifeState _x isEqualTo ""UNCONSCIOUS"")}}; " \n
                         "" \n
                         "// force out! " \n
                         "{" \n
                         "	[_x] orderGetIn false;" \n
                         "	true " \n
                         "} count _crew; "/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Rest">*/
                                class Rest
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Check_queue__and";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Jink_">*/
                class Jink_
                {
                        name = "Jink_";
                        itemno = 62;
                        init = /*%FSM<STATEINIT""">*/"// debug " \n
                         "//systemchat ""VEHICLE JINK"";" \n
                         "" \n
                         "// timeout " \n
                         "_timeout = _timeout + 4; " \n
                         "" \n
                         "// execute jink " \n
                         "_destination = [_this] call lambs_danger_fnc_vehicleJink; " \n
                         "" \n
                         "// Share information!" \n
                         "[_this, (_this findNearestEnemy _dangerPos),lambs_danger_CQB_range + random 100,true] call lambs_danger_fnc_shareInformation;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Timeout__Destina">*/
                                class Timeout__Destina
                                {
                                        itemno = 63;
                                        priority = 0.000000;
                                        to="Reset_vehicle";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_this distance2d _destination < 2 || {time > _timeout}"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Pre_attack">*/
                class Pre_attack
                {
                        name = "Pre_attack";
                        itemno = 64;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// time out " \n
                         "_timeout = time + 5 + random 4;" \n
                         "" \n
                         "// look at <-- this reveals target. Attempt to disable to check" \n
                         "_this lookAt (eyePos _dangerCausedBy); " \n
                         "" \n
                         "// assault " \n
                         "private _assault = _this distance2d _dangerCausedBy < (lambs_danger_CQB_range);" \n
                         "" \n
                         "// coward" \n
                         "private _coward = (!_CQCmode) && {getSuppression _this > 0.7} && {[_this, _dangerCausedBy] call lambs_danger_fnc_coward};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "CQC">*/
                                class CQC
                                {
                                        itemno = 53;
                                        priority = 4.000000;
                                        to="Clear_buildings";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_CQCmode && {_assault}"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Coward">*/
                                class Coward
                                {
                                        itemno = 66;
                                        priority = 1.000000;
                                        to="Coward";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_coward"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Always">*/
                                class Always
                                {
                                        itemno = 65;
                                        priority = 0.000000;
                                        to="Attack___Suppress";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Coward">*/
                class Coward
                {
                        name = "Coward";
                        itemno = 67;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// time out" \n
                         "_timeout = _timeout + 5;" \n
                         "" \n
                         "// fleeing" \n
                         "[_this] call lambs_danger_fnc_fleeing;" \n
                         "" \n
                         "// update leader-mode" \n
                         "[_this, 2, _dangerCausedby] call lambs_danger_fnc_leaderMode;" \n
                         "" \n
                         "// Share information!" \n
                         "//[_this,_dangerCausedBy,lambs_danger_CQB_range + random 100,true] call lambs_danger_fnc_shareInformation;" \n
                         "" \n
                         "// debug " \n
                         "//systemchat format [""%1 - Coward! - %2s"",side _this,round (_timeout - time)];"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 26;
                                        priority = 0.000000;
                                        to="Timeout__Continu";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Clear_buildings">*/
                class Clear_buildings
                {
                        name = "Clear_buildings";
                        itemno = 68;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// time out " \n
                         "_timeout = time + 20;" \n
                         "private _timeoutCQC = time + 6 + random 5; " \n
                         "" \n
                         "// leaders update buildings " \n
                         "if (isFormationLeader _this || {(group _this getVariable [""lambs_danger_inCQC"",[]])  isEqualTo []}) then {" \n
                         "	[_this, _dangerCausedBy, 100] call lambs_danger_fnc_leaderCQC; " \n
                         "}; " \n
                         "" \n
                         "// check formation" \n
                         "_CQCmode = (formation group _this) in lambs_danger_CQB_formations;" \n
                         "" \n
                         "// set speed" \n
                         "//_this forceSpeed ([_this, _dangerCausedBy] call lambs_danger_fnc_assaultSpeed);" \n
                         "" \n
                         "// methodical sweep of buildings " \n
                         "[_this] call lambs_danger_fnc_assaultBuilding;" \n
                         "" \n
                         "// debug " \n
                         "//systemchat format [""%1 - CQC! - %2 for %3s"",side _this,count _buildings,round (_timeout - time)];" \n
                         "" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Cycle_">*/
                                class Cycle_
                                {
                                        itemno = 69;
                                        priority = 1.000000;
                                        to="Clear_buildings";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeoutCQC"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Player_formation">*/
                                class Player_formation
                                {
                                        itemno = 76;
                                        priority = 0.000000;
                                        to="Timeout__Continu";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"isPlayer formationLeader _this || {!_CQCmode}"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 26;
                                        priority = 0.000000;
                                        to="Timeout__Continu";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Suppression">*/
                class Suppression
                {
                        name = "Suppression";
                        itemno = 72;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// timeout " \n
                         "_timeout = 15 + random 8; " \n
                         "" \n
                         "// suppression " \n
                         "if (_attack) then {" \n
                         "	[_this, _dangerPos] call lambs_danger_fnc_vehicleSuppress;" \n
                         "}; " \n
                         "" \n
                         "// get out if enemy near" \n
                         "if ((_this findNearestEnemy _dangerPos) distance _this < (6 + random 15)) then {" \n
                         "	[_this] orderGetIn false;" \n
                         "	_this setSuppression 0.94; 	// to prevent instant laser aim on exiting vehicle" \n
                         "}; "/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 18;
                                        priority = 0.000000;
                                        to="Reset_vehicle";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Artillery__none">*/
                class Artillery__none
                {
                        name = "Artillery__none";
                        itemno = 79;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// variable" \n
                         "(vehicle _this) setVariable [""lambs_danger_isArtillery"", true];" \n
                         "" \n
                         "// health " \n
                         "_health = damage _this; " \n
                         "" \n
                         "// timeout " \n
                         "_timeout = 20 + random 8; "/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Got_hit__Danger">*/
                                class Got_hit__Danger
                                {
                                        itemno = 61;
                                        priority = 2.000000;
                                        to="Jink_";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"(_health < damage (vehicle _this)) || {_dangerCausedBy distance (vehicle _this) < 20}"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 18;
                                        priority = 0.000000;
                                        to="Reset_vehicle";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Force_move">*/
                class Force_move
                {
                        name = "Force_move";
                        itemno = 81;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// time out " \n
                         "_timeout = time + 6 + random 6; " \n
                         "" \n
                         "// destination" \n
                         "private _destination = (expectedDestination _this) select 0;" \n
                         "" \n
                         "// look" \n
                         "_this doWatch ObjNull;" \n
                         "_this setFormDir (_this getDir _destination);" \n
                         "" \n
                         "// debug " \n
                         "if (lambs_danger_debug_FSM) then {" \n
                         "" \n
                         "	/// msg " \n
                         "	systemchat format [""%1 - FORCE MOVE!! - %2 for %3s"",side _this,name _this,round (_timeout - time)];" \n
                         "" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Timeout">*/
                                class Timeout
                                {
                                        itemno = 82;
                                        priority = 0.000000;
                                        to="Reset_move___Con";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeout || {_this distance _destination < 0.5}"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Reset_move___Con">*/
                class Reset_move___Con
                {
                        name = "Reset_move___Con";
                        itemno = 83;
                        init = /*%FSM<STATEINIT""">*/"" \n
                         "// reset variable" \n
                         "_this setVariable [""lambs_danger_forceMove"", nil];"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Rest">*/
                                class Rest
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Check_queue__and";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
        };
        initState="Reacting_on_danger";
        finalStates[] =
        {
                "End",
        };
};
/*%FSM</COMPILE>*/